{"ast":null,"code":"var _jsxFileName = \"D:\\\\Assignments\\\\shibili-ai-resume-builder\\\\frontend\\\\src\\\\components\\\\ResumeBuilder.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../api\";\nimport PersonalDetailsSection from \"./ResumeSections/PersonalDetailsSection\";\nimport EducationSection from \"./ResumeSections/EducationSection\";\nimport ExperienceSection from \"./ResumeSections/ExperienceSection\";\nimport ProjectsSection from \"./ResumeSections/ProjectsSection\";\nimport SkillsSection from \"./ResumeSections/SkillsSection\";\nimport CertificatesSection from \"./ResumeSections/CertificatesSection\";\nimport Navbar from \"./Navbar\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst qualificationList = [\"M.A (Master of Arts)\", \"M.Sc (Master of Science)\", \"M.Com (Master of Commerce)\", \"MBA (Master of Business Administration)\", \"MCA (Master of Computer Applications)\", \"M.Tech (Master of Technology)\", \"M.E (Master of Engineering)\", \"M.Ed (Master of Education)\", \"B.A (Bachelor of Arts)\", \"B.Sc (Bachelor of Science)\", \"B.Com (Bachelor of Commerce)\", \"BBA (Bachelor of Business Administration)\", \"BCA (Bachelor of Computer Applications)\", \"B.Tech (Bachelor of Technology)\", \"B.E (Bachelor of Engineering)\", \"B.Ed (Bachelor of Education)\", \"Diploma\", \"Higher Secondary (HSC)\", \"Secondary School (SSLC)\", \"Other\"];\nconst ResumeBuilder = () => {\n  _s();\n  const navigate = useNavigate();\n  const [form, setForm] = useState({\n    name: \"\",\n    emailId: \"\",\n    linkedIn: \"\",\n    portfolioLink: \"\",\n    phoneNo: \"\",\n    role: \"\",\n    totalExperienceYear: \"\",\n    summary: \"\",\n    education: [{\n      institute: \"\",\n      startYear: \"\",\n      endYear: \"\",\n      eduType: \"\",\n      eduTypeOther: \"\",\n      department: \"\",\n      score: \"\",\n      scoreType: \"CGPA\"\n    }],\n    experience: [{\n      role: \"\",\n      company: \"\",\n      duration: \"\",\n      activities: \"\"\n    }],\n    projects: [{\n      name: \"\",\n      description: \"\",\n      technologies: \"\",\n      keyPoints: [\"\"],\n      link: \"\"\n    }],\n    certificates: [{\n      title: \"\",\n      issuedBy: \"\",\n      issuedOn: \"\",\n      credential: \"\"\n    }],\n    skills: [\"\"],\n    highestEducation: \"\",\n    highestEducationOther: \"\",\n    languages: [{\n      language: \"\",\n      level: \"\",\n      otherLevel: \"\"\n    }],\n    nationality: \"\",\n    availabilityType: \"\",\n    noticePeriod: \"\",\n    availableFromDate: \"\",\n    additionalNotes: \"\"\n  });\n  const [gensummary, setSummary] = useState(\"\");\n  const [summaryLoading, setSummaryLoading] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  // ----------------- helpers -----------------\n  const setScalar = (key, value) => setForm(s => ({\n    ...s,\n    [key]: value\n  }));\n  const updateArrayField = (section, index, field, value) => {\n    const copy = [...form[section]];\n    if (field === null) {\n      copy[index] = value;\n    } else {\n      copy[index] = {\n        ...copy[index],\n        [field]: value\n      };\n    }\n    setForm({\n      ...form,\n      [section]: copy\n    });\n  };\n  const addRow = (section, template) => {\n    setForm(s => ({\n      ...s,\n      [section]: [...s[section], template]\n    }));\n  };\n  const addProjectKeyPoint = projectIndex => {\n    const projects = [...form.projects];\n    projects[projectIndex].keyPoints = projects[projectIndex].keyPoints || [\"\"];\n    projects[projectIndex].keyPoints.push(\"\");\n    setForm({\n      ...form,\n      projects\n    });\n  };\n  const updateProjectKeyPoint = (projectIndex, kpIndex, value) => {\n    const projects = [...form.projects];\n    projects[projectIndex].keyPoints[kpIndex] = value;\n    setForm({\n      ...form,\n      projects\n    });\n  };\n  const handleChange = (section, index, field, value) => {\n    // updates simple scalar fields like highestEducation, highestEducationOther\n    if (index === null && field === null) {\n      setForm(prev => ({\n        ...prev,\n        [section]: value\n      }));\n      return;\n    }\n\n    // updates array fields like education, experience etc.\n    setForm(prev => {\n      const updated = [...prev[section]];\n      updated[index] = {\n        ...updated[index],\n        [field]: value\n      };\n      return {\n        ...prev,\n        [section]: updated\n      };\n    });\n  };\n  const addField = (section, newItem) => {\n    setForm(prev => ({\n      ...prev,\n      [section]: [...prev[section], newItem]\n    }));\n  };\n\n  // ----------------- AI Summary -----------------\n  const buildPrompt = () => {\n    const skillsText = form.skills.filter(Boolean).join(\", \") || \"N/A\";\n    return `\nWrite a professional resume summary for a ${form.role || \"professional\"} with ${form.totalExperienceYear || 0} year(s) of experience. \nif the years of experience is 0 then just use as a fresher.\nHighlight these skills: ${skillsText}.\nKeep it concise (<= 100 words), results-focused, and suitable for a recruiter.\n`.trim();\n  };\n  const generateSummary = async () => {\n    setLoading(true);\n    try {\n      var _ref, _ref2, _res$data$summary, _res$data, _res$data2, _res$data3;\n      const prompt = buildPrompt();\n      const res = await api.post(\"/ai/generate\", {\n        prompt\n      });\n      const aiSummary = (_ref = (_ref2 = (_res$data$summary = (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.summary) !== null && _res$data$summary !== void 0 ? _res$data$summary : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.result) !== null && _ref2 !== void 0 ? _ref2 : (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.data) !== null && _ref !== void 0 ? _ref : \"\";\n      setSummary(aiSummary);\n      return aiSummary;\n    } catch (err) {\n      var _err$response$data, _err$response;\n      console.error(\"AI generation error:\", (_err$response$data = err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) !== null && _err$response$data !== void 0 ? _err$response$data : err === null || err === void 0 ? void 0 : err.message);\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ----------------- Preview HTML for /preview -----------------\n  const buildPreviewHtml = resolvedSummary => {\n    const clean = x => x && String(x).trim() ? String(x).trim() : \"\";\n\n    // ====================== Education ======================\n    const eduHtml = (form.education || []).filter(e => clean(e.institute)).map(e => `\n    <div class=\"edu-item\">\n      <div class=\"row-space\">\n        <strong>${clean(e.institute)}</strong>\n        <span>${clean(e.startYear)}${clean(e.startYear) || clean(e.endYear) ? \" - \" : \"\"}${clean(e.endYear)}</span>\n      </div>\n      <div class=\"left-row muted\">\n        ${clean(e.eduType === \"Other\" ? e.eduTypeOther : e.eduType)}\n        ${clean(e.department) ? ` ‚Äî ${clean(e.department)}` : \"\"}\n        ${clean(e.score) ? ` ‚Äî ${clean(e.score)}` : \"\"}\n      </div>\n    </div>`).join(\"\");\n\n    // ====================== Experience ======================\n    const expHtml = (form.experience || []).filter(e => clean(e.role) || clean(e.company)).map(e => `\n    <div class=\"exp-item\">\n      <div class=\"row-space\">\n        <strong>${clean(e.role)}</strong>\n        <span>${clean(e.duration)}</span>\n      </div>\n      <div class=\"left-row muted\">${clean(e.company)}</div>\n      ${clean(e.activities) ? `<div class=\"left-row\">${clean(e.activities)}</div>` : \"\"}\n    </div>`).join(\"\");\n\n    // ====================== Projects ======================\n    const projectsHtml = (form.projects || []).filter(p => clean(p.name)).map(p => {\n      var _p$keyPoints;\n      return `\n    <div class=\"proj-item\">\n      <div class=\"row-space\">\n        <strong>${clean(p.name)}</strong>\n        <span>${clean(p.link) ? `<a href=\"${clean(p.link)}\" target=\"_blank\" rel=\"noreferrer\">${clean(p.link)}</a>` : \"\"}</span>\n      </div>\n      ${clean(p.description) ? `<div class=\"left-row muted\">${clean(p.description)}</div>` : \"\"}\n      ${(_p$keyPoints = p.keyPoints) !== null && _p$keyPoints !== void 0 && _p$keyPoints.filter(kp => clean(kp)).length ? `<ul class=\"kp-list left-row\">\n                ${p.keyPoints.filter(kp => clean(kp)).map(kp => `<li>${kp}</li>`).join(\"\")}\n             </ul>` : \"\"}\n      ${clean(p.technologies) ? `<div class=\"left-row muted\"><strong>Tech Used:</strong> ${clean(p.technologies)}</div>` : \"\"}\n    </div>`;\n    }).join(\"\");\n\n    // ====================== Certificates (UPDATED) ======================\n    const certHtml = (form.certificates || []).filter(c => clean(c.title)).map(c => `\n    <div class=\"cert-item\" style=\"margin-bottom:10px;\">\n      <div class=\"row-space\" style=\"display:flex; justify-content:space-between; font-weight:600;\">\n        <span>${clean(c.title)}</span>\n        <span style=\"font-size:13px; color:#555;\">${clean(c.issuedOn)}</span>\n      </div>\n\n      <div class=\"left-row muted\">${clean(c.issuedBy) || \"\"}</div>\n\n      ${clean(c.credential) ? `<div class=\"left-row\">\n               <a href=\"${clean(c.credential)}\" target=\"_blank\" rel=\"noreferrer\">${clean(c.credential)}</a>\n             </div>` : \"\"}\n    </div>`).join(\"\");\n\n    // ====================== Skills ======================\n    const skillsHtml = form.skills.filter(Boolean).length ? `<div class=\"skills-wrap\">\n         ${form.skills.filter(Boolean).map(s => `<span class=\"skill-pill\">${s}</span>`).join(\" \")}\n       </div>` : \"\";\n\n    // ====================== FINAL PREVIEW HTML ======================\n    return `\n    <div class=\"preview-root\">\n      <h1 class=\"center\">${clean(form.name) || \"\"}</h1>\n      <div class=\"center muted\">${clean(form.role) || \"\"}</div>\n\n      <div class=\"contact center\">\n        ${clean(form.emailId) ? `üìß ${clean(form.emailId)} ` : \"\"}\n        ${clean(form.phoneNo) ? ` | üìû ${clean(form.phoneNo)} ` : \"\"}\n        ${clean(form.linkedIn) ? ` | üîó ${clean(form.linkedIn)} ` : \"\"}\n        ${clean(form.portfolioLink) ? ` | üåê ${clean(form.portfolioLink)}` : \"\"}\n      </div>\n\n      ${resolvedSummary ? `<h3 style=\"font-weight:700;\">Professional Summary</h3><hr/>\n             <div class=\"section-body\">${resolvedSummary}</div>` : \"\"}\n\n      ${eduHtml ? `<h3 style=\"font-weight:800;\">Education</h3><hr/><div class=\"section-body\">${eduHtml}</div>` : \"\"}\n      ${expHtml ? `<h3 style=\"font-weight:800;\">Experience</h3><hr/><div class=\"section-body\">${expHtml}</div>` : \"\"}\n      ${projectsHtml ? `<h3 style=\"font-weight:800;\">Projects</h3><hr/><div class=\"section-body\">${projectsHtml}</div>` : \"\"}\n      ${certHtml ? `<h3 style=\"font-weight:800;\">Certificates</h3><hr/><div class=\"section-body\">${certHtml}</div>` : \"\"}\n      ${skillsHtml ? `<h3 style=\"font-weight:800;\">Skills</h3><hr/><div class=\"section-body\">${skillsHtml}</div>` : \"\"}\n    </div>\n  `;\n  };\n\n  // ----------------- Actions -----------------\n  const handlePreview = () => {\n    if (!gensummary) {\n      alert(\"Please generate a summary first!\");\n      return;\n    }\n    const previewHtml = buildPreviewHtml(gensummary);\n    navigate(\"/preview\", {\n      state: {\n        form,\n        gensummary,\n        previewHtml\n      }\n    });\n  };\n  const saveResumeHandler = async () => {\n    try {\n      var _res$data4;\n      setLoading(true);\n      const res = await api.post(\"/portfolio\", form);\n      console.log(res.data);\n      if ((_res$data4 = res.data) !== null && _res$data4 !== void 0 && _res$data4.success) {\n        alert(\"‚úÖ Resume data saved successfully!\");\n      } else {\n        alert(\"‚ùå Failed to save resume data.\");\n      }\n    } catch (err) {\n      var _err$response2;\n      console.error(\"SAVE ERROR:\", ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data) || err.message);\n      alert(\"‚ùå Error saving resume data.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ----------------- JSX -----------------\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-5xl mx-auto my-8 px-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white border border-gray-100 shadow-sm rounded-xl p-6 md:p-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"flex items-center justify-between gap-4 mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-semibold text-gray-900\",\n              children: \"AI Resume Builder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500 mt-1\",\n              children: \"Fill your details, generate an AI summary, preview & export.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(PersonalDetailsSection, {\n          form: form,\n          setScalar: setScalar\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(EducationSection, {\n          form: form,\n          handleChange: handleChange,\n          addField: addField,\n          qualificationList: qualificationList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(ExperienceSection, {\n          experience: form.experience,\n          updateArrayField: updateArrayField,\n          addRow: addRow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(ProjectsSection, {\n          projects: form.projects,\n          updateArrayField: updateArrayField,\n          addRow: addRow,\n          addProjectKeyPoint: addProjectKeyPoint,\n          updateProjectKeyPoint: updateProjectKeyPoint\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(CertificatesSection, {\n          certificates: form.certificates,\n          updateArrayField: updateArrayField,\n          addRow: addRow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(SkillsSection, {\n          skills: form.skills,\n          updateArrayField: updateArrayField,\n          addRow: addRow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8 flex flex-col items-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 disabled:opacity-60 disabled:cursor-not-allowed\",\n            onClick: saveResumeHandler,\n            disabled: loading,\n            children: \"\\uD83D\\uDCBE Save Resume\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"inline-flex items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed\",\n              onClick: async () => {\n                try {\n                  setSummaryLoading(true);\n                  const aiSummary = await generateSummary();\n                  setSummary(aiSummary.replace(/\\*/g, \"\"));\n                } catch (err) {\n                  alert(\"Error generating summary ‚Äî please check network or API key.\");\n                } finally {\n                  setSummaryLoading(false);\n                }\n              },\n              disabled: loading,\n              children: gensummary ? \"Generate Another Summary\" : \"Generate Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 h-4\",\n              children: summaryLoading ? \"Generating summary...\" : \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 13\n            }, this), gensummary && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full mt-2 rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-800\",\n              children: gensummary\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"inline-flex items-center justify-center rounded-md bg-emerald-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-emerald-700 disabled:opacity-60 disabled:cursor-not-allowed\",\n            onClick: handlePreview,\n            disabled: !gensummary,\n            children: \"\\uD83D\\uDC41\\uFE0F Preview Resume\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n_s(ResumeBuilder, \"Rw7p1fULX/QFPu0CDkkkyKt77Q4=\", false, function () {\n  return [useNavigate];\n});\n_c = ResumeBuilder;\nexport default ResumeBuilder;\nvar _c;\n$RefreshReg$(_c, \"ResumeBuilder\");","map":{"version":3,"names":["React","useState","useNavigate","api","PersonalDetailsSection","EducationSection","ExperienceSection","ProjectsSection","SkillsSection","CertificatesSection","Navbar","jsxDEV","_jsxDEV","Fragment","_Fragment","qualificationList","ResumeBuilder","_s","navigate","form","setForm","name","emailId","linkedIn","portfolioLink","phoneNo","role","totalExperienceYear","summary","education","institute","startYear","endYear","eduType","eduTypeOther","department","score","scoreType","experience","company","duration","activities","projects","description","technologies","keyPoints","link","certificates","title","issuedBy","issuedOn","credential","skills","highestEducation","highestEducationOther","languages","language","level","otherLevel","nationality","availabilityType","noticePeriod","availableFromDate","additionalNotes","gensummary","setSummary","summaryLoading","setSummaryLoading","loading","setLoading","setScalar","key","value","s","updateArrayField","section","index","field","copy","addRow","template","addProjectKeyPoint","projectIndex","push","updateProjectKeyPoint","kpIndex","handleChange","prev","updated","addField","newItem","buildPrompt","skillsText","filter","Boolean","join","trim","generateSummary","_ref","_ref2","_res$data$summary","_res$data","_res$data2","_res$data3","prompt","res","post","aiSummary","data","result","err","_err$response$data","_err$response","console","error","response","message","buildPreviewHtml","resolvedSummary","clean","x","String","eduHtml","e","map","expHtml","projectsHtml","p","_p$keyPoints","kp","length","certHtml","c","skillsHtml","handlePreview","alert","previewHtml","state","saveResumeHandler","_res$data4","log","success","_err$response2","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","disabled","replace","_c","$RefreshReg$"],"sources":["D:/Assignments/shibili-ai-resume-builder/frontend/src/components/ResumeBuilder.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport api from \"../api\"; \r\nimport PersonalDetailsSection from \"./ResumeSections/PersonalDetailsSection\";\r\nimport EducationSection from \"./ResumeSections/EducationSection\";\r\nimport ExperienceSection from \"./ResumeSections/ExperienceSection\";\r\nimport ProjectsSection from \"./ResumeSections/ProjectsSection\";\r\nimport SkillsSection from \"./ResumeSections/SkillsSection\";\r\nimport CertificatesSection from \"./ResumeSections/CertificatesSection\";\r\nimport Navbar from \"./Navbar\";\r\nconst qualificationList = [\r\n  \"M.A (Master of Arts)\",\r\n  \"M.Sc (Master of Science)\",\r\n  \"M.Com (Master of Commerce)\",\r\n  \"MBA (Master of Business Administration)\",\r\n  \"MCA (Master of Computer Applications)\",\r\n  \"M.Tech (Master of Technology)\",\r\n  \"M.E (Master of Engineering)\",\r\n  \"M.Ed (Master of Education)\",\r\n  \"B.A (Bachelor of Arts)\",\r\n  \"B.Sc (Bachelor of Science)\",\r\n  \"B.Com (Bachelor of Commerce)\",\r\n  \"BBA (Bachelor of Business Administration)\",\r\n  \"BCA (Bachelor of Computer Applications)\",\r\n  \"B.Tech (Bachelor of Technology)\",\r\n  \"B.E (Bachelor of Engineering)\",\r\n  \"B.Ed (Bachelor of Education)\",\r\n  \"Diploma\",\r\n  \"Higher Secondary (HSC)\",\r\n  \"Secondary School (SSLC)\",\r\n  \"Other\",\r\n];\r\n\r\nconst ResumeBuilder = () => {\r\n  const navigate = useNavigate();\r\n\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    emailId: \"\",\r\n    linkedIn: \"\",\r\n    portfolioLink: \"\",\r\n    phoneNo: \"\",\r\n    role: \"\",\r\n    totalExperienceYear: \"\",\r\n    summary: \"\",\r\n    education: [\r\n      {\r\n        institute: \"\",\r\n        startYear: \"\",\r\n        endYear: \"\",\r\n        eduType: \"\",\r\n        eduTypeOther: \"\",\r\n        department: \"\",\r\n        score: \"\",\r\n        scoreType: \"CGPA\",\r\n      },\r\n    ],\r\n    experience: [{ role: \"\", company: \"\", duration: \"\", activities: \"\" }],\r\n    projects: [\r\n      {\r\n        name: \"\",\r\n        description: \"\",\r\n        technologies: \"\",\r\n        keyPoints: [\"\"],\r\n        link: \"\",\r\n      },\r\n    ],\r\n    certificates: [\r\n      { title: \"\", issuedBy: \"\", issuedOn: \"\", credential: \"\" },\r\n    ],\r\n    skills: [\"\"],\r\n    highestEducation: \"\",\r\n    highestEducationOther: \"\",\r\n    languages: [\r\n      { language: \"\", level: \"\", otherLevel: \"\" }\r\n    ],\r\n    nationality: \"\",\r\n    availabilityType: \"\",\r\n    noticePeriod: \"\",\r\n    availableFromDate: \"\",\r\n    additionalNotes: \"\",\r\n\r\n  });\r\n\r\n  const [gensummary, setSummary] = useState(\"\");\r\n  const [summaryLoading, setSummaryLoading] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // ----------------- helpers -----------------\r\n  const setScalar = (key, value) =>\r\n    setForm((s) => ({\r\n      ...s,\r\n      [key]: value,\r\n    }));\r\n\r\n  const updateArrayField = (section, index, field, value) => {\r\n    const copy = [...form[section]];\r\n    if (field === null) {\r\n      copy[index] = value;\r\n    } else {\r\n      copy[index] = { ...copy[index], [field]: value };\r\n    }\r\n    setForm({ ...form, [section]: copy });\r\n  };\r\n\r\n  const addRow = (section, template) => {\r\n    setForm((s) => ({ ...s, [section]: [...s[section], template] }));\r\n  };\r\n\r\n  const addProjectKeyPoint = (projectIndex) => {\r\n    const projects = [...form.projects];\r\n    projects[projectIndex].keyPoints =\r\n      projects[projectIndex].keyPoints || [\"\"];\r\n    projects[projectIndex].keyPoints.push(\"\");\r\n    setForm({ ...form, projects });\r\n  };\r\n\r\n  const updateProjectKeyPoint = (projectIndex, kpIndex, value) => {\r\n    const projects = [...form.projects];\r\n    projects[projectIndex].keyPoints[kpIndex] = value;\r\n    setForm({ ...form, projects });\r\n  };\r\n\r\n  const handleChange = (section, index, field, value) => {\r\n  // updates simple scalar fields like highestEducation, highestEducationOther\r\n  if (index === null && field === null) {\r\n    setForm((prev) => ({\r\n      ...prev,\r\n      [section]: value,\r\n    }));\r\n    return;\r\n  }\r\n\r\n  // updates array fields like education, experience etc.\r\n  setForm((prev) => {\r\n    const updated = [...prev[section]];\r\n    updated[index] = {\r\n      ...updated[index],\r\n      [field]: value,\r\n    };\r\n    return { ...prev, [section]: updated };\r\n  });\r\n};\r\n\r\n\r\n  const addField = (section, newItem) => {\r\n    setForm((prev) => ({ ...prev, [section]: [...prev[section], newItem] }));\r\n  };\r\n\r\n  // ----------------- AI Summary -----------------\r\n  const buildPrompt = () => {\r\n    const skillsText = form.skills.filter(Boolean).join(\", \") || \"N/A\";\r\n    return `\r\nWrite a professional resume summary for a ${form.role || \"professional\"} with ${form.totalExperienceYear || 0} year(s) of experience. \r\nif the years of experience is 0 then just use as a fresher.\r\nHighlight these skills: ${skillsText}.\r\nKeep it concise (<= 100 words), results-focused, and suitable for a recruiter.\r\n`.trim();\r\n  };\r\n\r\n  const generateSummary = async () => {\r\n    setLoading(true);\r\n \r\n    try {\r\n      const prompt = buildPrompt();\r\n      const res = await api.post(\"/ai/generate\", { prompt });\r\n      const aiSummary =\r\n        res.data?.summary ?? res.data?.result ?? res.data?.data ?? \"\";\r\n      setSummary(aiSummary);\r\n      return aiSummary;\r\n    } catch (err) {\r\n      console.error(\"AI generation error:\", err?.response?.data ?? err?.message);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ----------------- Preview HTML for /preview -----------------\r\n  const buildPreviewHtml = (resolvedSummary) => {\r\n  const clean = (x) => (x && String(x).trim() ? String(x).trim() : \"\");\r\n\r\n  // ====================== Education ======================\r\n  const eduHtml = (form.education || [])\r\n    .filter((e) => clean(e.institute))\r\n    .map(\r\n      (e) => `\r\n    <div class=\"edu-item\">\r\n      <div class=\"row-space\">\r\n        <strong>${clean(e.institute)}</strong>\r\n        <span>${clean(e.startYear)}${clean(e.startYear) || clean(e.endYear) ? \" - \" : \"\"}${clean(e.endYear)}</span>\r\n      </div>\r\n      <div class=\"left-row muted\">\r\n        ${clean(e.eduType === \"Other\" ? e.eduTypeOther : e.eduType)}\r\n        ${clean(e.department) ? ` ‚Äî ${clean(e.department)}` : \"\"}\r\n        ${clean(e.score) ? ` ‚Äî ${clean(e.score)}` : \"\"}\r\n      </div>\r\n    </div>`\r\n    )\r\n    .join(\"\");\r\n\r\n  // ====================== Experience ======================\r\n  const expHtml = (form.experience || [])\r\n    .filter((e) => clean(e.role) || clean(e.company))\r\n    .map(\r\n      (e) => `\r\n    <div class=\"exp-item\">\r\n      <div class=\"row-space\">\r\n        <strong>${clean(e.role)}</strong>\r\n        <span>${clean(e.duration)}</span>\r\n      </div>\r\n      <div class=\"left-row muted\">${clean(e.company)}</div>\r\n      ${clean(e.activities) ? `<div class=\"left-row\">${clean(e.activities)}</div>` : \"\"}\r\n    </div>`\r\n    )\r\n    .join(\"\");\r\n\r\n  // ====================== Projects ======================\r\n  const projectsHtml = (form.projects || [])\r\n    .filter((p) => clean(p.name))\r\n    .map(\r\n      (p) => `\r\n    <div class=\"proj-item\">\r\n      <div class=\"row-space\">\r\n        <strong>${clean(p.name)}</strong>\r\n        <span>${\r\n          clean(p.link)\r\n            ? `<a href=\"${clean(p.link)}\" target=\"_blank\" rel=\"noreferrer\">${clean(p.link)}</a>`\r\n            : \"\"\r\n        }</span>\r\n      </div>\r\n      ${clean(p.description) ? `<div class=\"left-row muted\">${clean(p.description)}</div>` : \"\"}\r\n      ${\r\n        p.keyPoints?.filter((kp) => clean(kp)).length\r\n          ? `<ul class=\"kp-list left-row\">\r\n                ${p.keyPoints.filter((kp) => clean(kp)).map((kp) => `<li>${kp}</li>`).join(\"\")}\r\n             </ul>`\r\n          : \"\"\r\n      }\r\n      ${\r\n        clean(p.technologies)\r\n          ? `<div class=\"left-row muted\"><strong>Tech Used:</strong> ${clean(p.technologies)}</div>`\r\n          : \"\"\r\n      }\r\n    </div>`\r\n    )\r\n    .join(\"\");\r\n\r\n  // ====================== Certificates (UPDATED) ======================\r\n  const certHtml = (form.certificates || [])\r\n    .filter((c) => clean(c.title))\r\n    .map(\r\n      (c) => `\r\n    <div class=\"cert-item\" style=\"margin-bottom:10px;\">\r\n      <div class=\"row-space\" style=\"display:flex; justify-content:space-between; font-weight:600;\">\r\n        <span>${clean(c.title)}</span>\r\n        <span style=\"font-size:13px; color:#555;\">${clean(c.issuedOn)}</span>\r\n      </div>\r\n\r\n      <div class=\"left-row muted\">${clean(c.issuedBy) || \"\"}</div>\r\n\r\n      ${\r\n        clean(c.credential)\r\n          ? `<div class=\"left-row\">\r\n               <a href=\"${clean(c.credential)}\" target=\"_blank\" rel=\"noreferrer\">${clean(c.credential)}</a>\r\n             </div>`\r\n          : \"\"\r\n      }\r\n    </div>`\r\n    )\r\n    .join(\"\");\r\n\r\n  // ====================== Skills ======================\r\n  const skillsHtml = form.skills.filter(Boolean).length\r\n    ? `<div class=\"skills-wrap\">\r\n         ${form.skills.filter(Boolean).map((s) => `<span class=\"skill-pill\">${s}</span>`).join(\" \")}\r\n       </div>`\r\n    : \"\";\r\n\r\n  // ====================== FINAL PREVIEW HTML ======================\r\n  return `\r\n    <div class=\"preview-root\">\r\n      <h1 class=\"center\">${clean(form.name) || \"\"}</h1>\r\n      <div class=\"center muted\">${clean(form.role) || \"\"}</div>\r\n\r\n      <div class=\"contact center\">\r\n        ${clean(form.emailId) ? `üìß ${clean(form.emailId)} ` : \"\"}\r\n        ${clean(form.phoneNo) ? ` | üìû ${clean(form.phoneNo)} ` : \"\"}\r\n        ${clean(form.linkedIn) ? ` | üîó ${clean(form.linkedIn)} ` : \"\"}\r\n        ${clean(form.portfolioLink) ? ` | üåê ${clean(form.portfolioLink)}` : \"\"}\r\n      </div>\r\n\r\n      ${\r\n        resolvedSummary\r\n          ? `<h3 style=\"font-weight:700;\">Professional Summary</h3><hr/>\r\n             <div class=\"section-body\">${resolvedSummary}</div>`\r\n          : \"\"\r\n      }\r\n\r\n      ${eduHtml ? `<h3 style=\"font-weight:800;\">Education</h3><hr/><div class=\"section-body\">${eduHtml}</div>` : \"\"}\r\n      ${expHtml ? `<h3 style=\"font-weight:800;\">Experience</h3><hr/><div class=\"section-body\">${expHtml}</div>` : \"\"}\r\n      ${projectsHtml ? `<h3 style=\"font-weight:800;\">Projects</h3><hr/><div class=\"section-body\">${projectsHtml}</div>` : \"\"}\r\n      ${certHtml ? `<h3 style=\"font-weight:800;\">Certificates</h3><hr/><div class=\"section-body\">${certHtml}</div>` : \"\"}\r\n      ${skillsHtml ? `<h3 style=\"font-weight:800;\">Skills</h3><hr/><div class=\"section-body\">${skillsHtml}</div>` : \"\"}\r\n    </div>\r\n  `;\r\n};\r\n\r\n  // ----------------- Actions -----------------\r\n  const handlePreview = () => {\r\n    if (!gensummary) {\r\n      alert(\"Please generate a summary first!\");\r\n      return;\r\n    }\r\n    const previewHtml = buildPreviewHtml(gensummary);\r\n    navigate(\"/preview\", { state: { form, gensummary, previewHtml } });\r\n  };\r\n\r\n  const saveResumeHandler = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      const res = await api.post(\"/portfolio\", form);\r\n      console.log(res.data)\r\n      if (res.data?.success) {\r\n        alert(\"‚úÖ Resume data saved successfully!\");\r\n      } else {\r\n        alert(\"‚ùå Failed to save resume data.\");\r\n      }\r\n    } catch (err) {\r\n        console.error(\"SAVE ERROR:\", err.response?.data || err.message);\r\n        alert(\"‚ùå Error saving resume data.\");\r\n      } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ----------------- JSX -----------------\r\n  return (\r\n    <>\r\n    <Navbar/>\r\n    \r\n    <div className=\"max-w-5xl mx-auto my-8 px-4\">\r\n      <div className=\"bg-white border border-gray-100 shadow-sm rounded-xl p-6 md:p-8\">\r\n        <header className=\"flex items-center justify-between gap-4 mb-6\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-semibold text-gray-900\">\r\n              AI Resume Builder\r\n            </h2>\r\n            <p className=\"text-sm text-gray-500 mt-1\">\r\n              Fill your details, generate an AI summary, preview & export.\r\n            </p>\r\n          </div>\r\n        </header>\r\n\r\n        {/* Personal Details */}\r\n        <PersonalDetailsSection form={form} setScalar={setScalar} />\r\n\r\n        {/* Education */}\r\n        <EducationSection\r\n          form={form}\r\n          handleChange={handleChange}\r\n          addField={addField}\r\n          qualificationList={qualificationList}\r\n        />\r\n\r\n        {/* Experience */}\r\n        <ExperienceSection\r\n          experience={form.experience}\r\n          updateArrayField={updateArrayField}\r\n          addRow={addRow}\r\n        />\r\n\r\n        {/* Projects */}\r\n        <ProjectsSection\r\n          projects={form.projects}\r\n          updateArrayField={updateArrayField}\r\n          addRow={addRow}\r\n          addProjectKeyPoint={addProjectKeyPoint}\r\n          updateProjectKeyPoint={updateProjectKeyPoint}\r\n        />\r\n\r\n        {/* Certificates */}\r\n        <CertificatesSection\r\n          certificates={form.certificates}\r\n          updateArrayField={updateArrayField}\r\n          addRow={addRow}\r\n        />\r\n\r\n        {/* Skills */}\r\n        <SkillsSection\r\n          skills={form.skills}\r\n          updateArrayField={updateArrayField}\r\n          addRow={addRow}\r\n        />\r\n\r\n        {/* Actions */}\r\n        <div className=\"mt-8 flex flex-col items-center gap-4\">\r\n          <button\r\n            className=\"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 disabled:opacity-60 disabled:cursor-not-allowed\"\r\n            onClick={saveResumeHandler}\r\n            disabled={loading}\r\n          >\r\n            üíæ Save Resume\r\n          </button>\r\n\r\n          <div className=\"flex flex-col items-center gap-2\">\r\n            <button\r\n              className=\"inline-flex items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed\"\r\n              onClick={async () => {\r\n                try {\r\n                  setSummaryLoading(true);\r\n                  const aiSummary = await generateSummary();\r\n                  setSummary(aiSummary.replace(/\\*/g, \"\"));\r\n                } catch (err) {\r\n                  alert(\r\n                    \"Error generating summary ‚Äî please check network or API key.\"\r\n                  );\r\n                } finally {\r\n                  setSummaryLoading(false);\r\n                }\r\n              }}\r\n              disabled={loading}\r\n            >\r\n              {gensummary ? \"Generate Another Summary\" : \"Generate Summary\"}\r\n            </button>\r\n            <p className=\"text-xs text-gray-500 h-4\">\r\n              {summaryLoading ? \"Generating summary...\" : \"\"}\r\n            </p>\r\n\r\n            {gensummary && (\r\n              <div className=\"w-full mt-2 rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-800\">\r\n                {gensummary}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <button\r\n            className=\"inline-flex items-center justify-center rounded-md bg-emerald-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-emerald-700 disabled:opacity-60 disabled:cursor-not-allowed\"\r\n            onClick={handlePreview}\r\n            disabled={!gensummary}\r\n          >\r\n            üëÅÔ∏è Preview Resume\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ResumeBuilder;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,GAAG,MAAM,QAAQ;AACxB,OAAOC,sBAAsB,MAAM,yCAAyC;AAC5E,OAAOC,gBAAgB,MAAM,mCAAmC;AAChE,OAAOC,iBAAiB,MAAM,oCAAoC;AAClE,OAAOC,eAAe,MAAM,kCAAkC;AAC9D,OAAOC,aAAa,MAAM,gCAAgC;AAC1D,OAAOC,mBAAmB,MAAM,sCAAsC;AACtE,OAAOC,MAAM,MAAM,UAAU;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAC9B,MAAMC,iBAAiB,GAAG,CACxB,sBAAsB,EACtB,0BAA0B,EAC1B,4BAA4B,EAC5B,yCAAyC,EACzC,uCAAuC,EACvC,+BAA+B,EAC/B,6BAA6B,EAC7B,4BAA4B,EAC5B,wBAAwB,EACxB,4BAA4B,EAC5B,8BAA8B,EAC9B,2CAA2C,EAC3C,yCAAyC,EACzC,iCAAiC,EACjC,+BAA+B,EAC/B,8BAA8B,EAC9B,SAAS,EACT,wBAAwB,EACxB,yBAAyB,EACzB,OAAO,CACR;AAED,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAMC,QAAQ,GAAGhB,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACiB,IAAI,EAAEC,OAAO,CAAC,GAAGnB,QAAQ,CAAC;IAC/BoB,IAAI,EAAE,EAAE;IACRC,OAAO,EAAE,EAAE;IACXC,QAAQ,EAAE,EAAE;IACZC,aAAa,EAAE,EAAE;IACjBC,OAAO,EAAE,EAAE;IACXC,IAAI,EAAE,EAAE;IACRC,mBAAmB,EAAE,EAAE;IACvBC,OAAO,EAAE,EAAE;IACXC,SAAS,EAAE,CACT;MACEC,SAAS,EAAE,EAAE;MACbC,SAAS,EAAE,EAAE;MACbC,OAAO,EAAE,EAAE;MACXC,OAAO,EAAE,EAAE;MACXC,YAAY,EAAE,EAAE;MAChBC,UAAU,EAAE,EAAE;MACdC,KAAK,EAAE,EAAE;MACTC,SAAS,EAAE;IACb,CAAC,CACF;IACDC,UAAU,EAAE,CAAC;MAAEZ,IAAI,EAAE,EAAE;MAAEa,OAAO,EAAE,EAAE;MAAEC,QAAQ,EAAE,EAAE;MAAEC,UAAU,EAAE;IAAG,CAAC,CAAC;IACrEC,QAAQ,EAAE,CACR;MACErB,IAAI,EAAE,EAAE;MACRsB,WAAW,EAAE,EAAE;MACfC,YAAY,EAAE,EAAE;MAChBC,SAAS,EAAE,CAAC,EAAE,CAAC;MACfC,IAAI,EAAE;IACR,CAAC,CACF;IACDC,YAAY,EAAE,CACZ;MAAEC,KAAK,EAAE,EAAE;MAAEC,QAAQ,EAAE,EAAE;MAAEC,QAAQ,EAAE,EAAE;MAAEC,UAAU,EAAE;IAAG,CAAC,CAC1D;IACDC,MAAM,EAAE,CAAC,EAAE,CAAC;IACZC,gBAAgB,EAAE,EAAE;IACpBC,qBAAqB,EAAE,EAAE;IACzBC,SAAS,EAAE,CACT;MAAEC,QAAQ,EAAE,EAAE;MAAEC,KAAK,EAAE,EAAE;MAAEC,UAAU,EAAE;IAAG,CAAC,CAC5C;IACDC,WAAW,EAAE,EAAE;IACfC,gBAAgB,EAAE,EAAE;IACpBC,YAAY,EAAE,EAAE;IAChBC,iBAAiB,EAAE,EAAE;IACrBC,eAAe,EAAE;EAEnB,CAAC,CAAC;EAEF,MAAM,CAACC,UAAU,EAAEC,UAAU,CAAC,GAAGhE,QAAQ,CAAC,EAAE,CAAC;EAC7C,MAAM,CAACiE,cAAc,EAAEC,iBAAiB,CAAC,GAAGlE,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACmE,OAAO,EAAEC,UAAU,CAAC,GAAGpE,QAAQ,CAAC,KAAK,CAAC;;EAE7C;EACA,MAAMqE,SAAS,GAAGA,CAACC,GAAG,EAAEC,KAAK,KAC3BpD,OAAO,CAAEqD,CAAC,KAAM;IACd,GAAGA,CAAC;IACJ,CAACF,GAAG,GAAGC;EACT,CAAC,CAAC,CAAC;EAEL,MAAME,gBAAgB,GAAGA,CAACC,OAAO,EAAEC,KAAK,EAAEC,KAAK,EAAEL,KAAK,KAAK;IACzD,MAAMM,IAAI,GAAG,CAAC,GAAG3D,IAAI,CAACwD,OAAO,CAAC,CAAC;IAC/B,IAAIE,KAAK,KAAK,IAAI,EAAE;MAClBC,IAAI,CAACF,KAAK,CAAC,GAAGJ,KAAK;IACrB,CAAC,MAAM;MACLM,IAAI,CAACF,KAAK,CAAC,GAAG;QAAE,GAAGE,IAAI,CAACF,KAAK,CAAC;QAAE,CAACC,KAAK,GAAGL;MAAM,CAAC;IAClD;IACApD,OAAO,CAAC;MAAE,GAAGD,IAAI;MAAE,CAACwD,OAAO,GAAGG;IAAK,CAAC,CAAC;EACvC,CAAC;EAED,MAAMC,MAAM,GAAGA,CAACJ,OAAO,EAAEK,QAAQ,KAAK;IACpC5D,OAAO,CAAEqD,CAAC,KAAM;MAAE,GAAGA,CAAC;MAAE,CAACE,OAAO,GAAG,CAAC,GAAGF,CAAC,CAACE,OAAO,CAAC,EAAEK,QAAQ;IAAE,CAAC,CAAC,CAAC;EAClE,CAAC;EAED,MAAMC,kBAAkB,GAAIC,YAAY,IAAK;IAC3C,MAAMxC,QAAQ,GAAG,CAAC,GAAGvB,IAAI,CAACuB,QAAQ,CAAC;IACnCA,QAAQ,CAACwC,YAAY,CAAC,CAACrC,SAAS,GAC9BH,QAAQ,CAACwC,YAAY,CAAC,CAACrC,SAAS,IAAI,CAAC,EAAE,CAAC;IAC1CH,QAAQ,CAACwC,YAAY,CAAC,CAACrC,SAAS,CAACsC,IAAI,CAAC,EAAE,CAAC;IACzC/D,OAAO,CAAC;MAAE,GAAGD,IAAI;MAAEuB;IAAS,CAAC,CAAC;EAChC,CAAC;EAED,MAAM0C,qBAAqB,GAAGA,CAACF,YAAY,EAAEG,OAAO,EAAEb,KAAK,KAAK;IAC9D,MAAM9B,QAAQ,GAAG,CAAC,GAAGvB,IAAI,CAACuB,QAAQ,CAAC;IACnCA,QAAQ,CAACwC,YAAY,CAAC,CAACrC,SAAS,CAACwC,OAAO,CAAC,GAAGb,KAAK;IACjDpD,OAAO,CAAC;MAAE,GAAGD,IAAI;MAAEuB;IAAS,CAAC,CAAC;EAChC,CAAC;EAED,MAAM4C,YAAY,GAAGA,CAACX,OAAO,EAAEC,KAAK,EAAEC,KAAK,EAAEL,KAAK,KAAK;IACvD;IACA,IAAII,KAAK,KAAK,IAAI,IAAIC,KAAK,KAAK,IAAI,EAAE;MACpCzD,OAAO,CAAEmE,IAAI,KAAM;QACjB,GAAGA,IAAI;QACP,CAACZ,OAAO,GAAGH;MACb,CAAC,CAAC,CAAC;MACH;IACF;;IAEA;IACApD,OAAO,CAAEmE,IAAI,IAAK;MAChB,MAAMC,OAAO,GAAG,CAAC,GAAGD,IAAI,CAACZ,OAAO,CAAC,CAAC;MAClCa,OAAO,CAACZ,KAAK,CAAC,GAAG;QACf,GAAGY,OAAO,CAACZ,KAAK,CAAC;QACjB,CAACC,KAAK,GAAGL;MACX,CAAC;MACD,OAAO;QAAE,GAAGe,IAAI;QAAE,CAACZ,OAAO,GAAGa;MAAQ,CAAC;IACxC,CAAC,CAAC;EACJ,CAAC;EAGC,MAAMC,QAAQ,GAAGA,CAACd,OAAO,EAAEe,OAAO,KAAK;IACrCtE,OAAO,CAAEmE,IAAI,KAAM;MAAE,GAAGA,IAAI;MAAE,CAACZ,OAAO,GAAG,CAAC,GAAGY,IAAI,CAACZ,OAAO,CAAC,EAAEe,OAAO;IAAE,CAAC,CAAC,CAAC;EAC1E,CAAC;;EAED;EACA,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACxB,MAAMC,UAAU,GAAGzE,IAAI,CAACiC,MAAM,CAACyC,MAAM,CAACC,OAAO,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK;IAClE,OAAO;AACX,4CAA4C5E,IAAI,CAACO,IAAI,IAAI,cAAc,SAASP,IAAI,CAACQ,mBAAmB,IAAI,CAAC;AAC7G;AACA,0BAA0BiE,UAAU;AACpC;AACA,CAAC,CAACI,IAAI,CAAC,CAAC;EACN,CAAC;EAED,MAAMC,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC5B,UAAU,CAAC,IAAI,CAAC;IAEhB,IAAI;MAAA,IAAA6B,IAAA,EAAAC,KAAA,EAAAC,iBAAA,EAAAC,SAAA,EAAAC,UAAA,EAAAC,UAAA;MACF,MAAMC,MAAM,GAAGb,WAAW,CAAC,CAAC;MAC5B,MAAMc,GAAG,GAAG,MAAMtG,GAAG,CAACuG,IAAI,CAAC,cAAc,EAAE;QAAEF;MAAO,CAAC,CAAC;MACtD,MAAMG,SAAS,IAAAT,IAAA,IAAAC,KAAA,IAAAC,iBAAA,IAAAC,SAAA,GACbI,GAAG,CAACG,IAAI,cAAAP,SAAA,uBAARA,SAAA,CAAUzE,OAAO,cAAAwE,iBAAA,cAAAA,iBAAA,IAAAE,UAAA,GAAIG,GAAG,CAACG,IAAI,cAAAN,UAAA,uBAARA,UAAA,CAAUO,MAAM,cAAAV,KAAA,cAAAA,KAAA,IAAAI,UAAA,GAAIE,GAAG,CAACG,IAAI,cAAAL,UAAA,uBAARA,UAAA,CAAUK,IAAI,cAAAV,IAAA,cAAAA,IAAA,GAAI,EAAE;MAC/DjC,UAAU,CAAC0C,SAAS,CAAC;MACrB,OAAOA,SAAS;IAClB,CAAC,CAAC,OAAOG,GAAG,EAAE;MAAA,IAAAC,kBAAA,EAAAC,aAAA;MACZC,OAAO,CAACC,KAAK,CAAC,sBAAsB,GAAAH,kBAAA,GAAED,GAAG,aAAHA,GAAG,wBAAAE,aAAA,GAAHF,GAAG,CAAEK,QAAQ,cAAAH,aAAA,uBAAbA,aAAA,CAAeJ,IAAI,cAAAG,kBAAA,cAAAA,kBAAA,GAAID,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEM,OAAO,CAAC;MAC1E,MAAMN,GAAG;IACX,CAAC,SAAS;MACRzC,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA,MAAMgD,gBAAgB,GAAIC,eAAe,IAAK;IAC9C,MAAMC,KAAK,GAAIC,CAAC,IAAMA,CAAC,IAAIC,MAAM,CAACD,CAAC,CAAC,CAACxB,IAAI,CAAC,CAAC,GAAGyB,MAAM,CAACD,CAAC,CAAC,CAACxB,IAAI,CAAC,CAAC,GAAG,EAAG;;IAEpE;IACA,MAAM0B,OAAO,GAAG,CAACvG,IAAI,CAACU,SAAS,IAAI,EAAE,EAClCgE,MAAM,CAAE8B,CAAC,IAAKJ,KAAK,CAACI,CAAC,CAAC7F,SAAS,CAAC,CAAC,CACjC8F,GAAG,CACDD,CAAC,IAAK;AACb;AACA;AACA,kBAAkBJ,KAAK,CAACI,CAAC,CAAC7F,SAAS,CAAC;AACpC,gBAAgByF,KAAK,CAACI,CAAC,CAAC5F,SAAS,CAAC,GAAGwF,KAAK,CAACI,CAAC,CAAC5F,SAAS,CAAC,IAAIwF,KAAK,CAACI,CAAC,CAAC3F,OAAO,CAAC,GAAG,KAAK,GAAG,EAAE,GAAGuF,KAAK,CAACI,CAAC,CAAC3F,OAAO,CAAC;AAC3G;AACA;AACA,UAAUuF,KAAK,CAACI,CAAC,CAAC1F,OAAO,KAAK,OAAO,GAAG0F,CAAC,CAACzF,YAAY,GAAGyF,CAAC,CAAC1F,OAAO,CAAC;AACnE,UAAUsF,KAAK,CAACI,CAAC,CAACxF,UAAU,CAAC,GAAG,MAAMoF,KAAK,CAACI,CAAC,CAACxF,UAAU,CAAC,EAAE,GAAG,EAAE;AAChE,UAAUoF,KAAK,CAACI,CAAC,CAACvF,KAAK,CAAC,GAAG,MAAMmF,KAAK,CAACI,CAAC,CAACvF,KAAK,CAAC,EAAE,GAAG,EAAE;AACtD;AACA,WACI,CAAC,CACA2D,IAAI,CAAC,EAAE,CAAC;;IAEX;IACA,MAAM8B,OAAO,GAAG,CAAC1G,IAAI,CAACmB,UAAU,IAAI,EAAE,EACnCuD,MAAM,CAAE8B,CAAC,IAAKJ,KAAK,CAACI,CAAC,CAACjG,IAAI,CAAC,IAAI6F,KAAK,CAACI,CAAC,CAACpF,OAAO,CAAC,CAAC,CAChDqF,GAAG,CACDD,CAAC,IAAK;AACb;AACA;AACA,kBAAkBJ,KAAK,CAACI,CAAC,CAACjG,IAAI,CAAC;AAC/B,gBAAgB6F,KAAK,CAACI,CAAC,CAACnF,QAAQ,CAAC;AACjC;AACA,oCAAoC+E,KAAK,CAACI,CAAC,CAACpF,OAAO,CAAC;AACpD,QAAQgF,KAAK,CAACI,CAAC,CAAClF,UAAU,CAAC,GAAG,yBAAyB8E,KAAK,CAACI,CAAC,CAAClF,UAAU,CAAC,QAAQ,GAAG,EAAE;AACvF,WACI,CAAC,CACAsD,IAAI,CAAC,EAAE,CAAC;;IAEX;IACA,MAAM+B,YAAY,GAAG,CAAC3G,IAAI,CAACuB,QAAQ,IAAI,EAAE,EACtCmD,MAAM,CAAEkC,CAAC,IAAKR,KAAK,CAACQ,CAAC,CAAC1G,IAAI,CAAC,CAAC,CAC5BuG,GAAG,CACDG,CAAC;MAAA,IAAAC,YAAA;MAAA,OAAK;AACb;AACA;AACA,kBAAkBT,KAAK,CAACQ,CAAC,CAAC1G,IAAI,CAAC;AAC/B,gBACUkG,KAAK,CAACQ,CAAC,CAACjF,IAAI,CAAC,GACT,YAAYyE,KAAK,CAACQ,CAAC,CAACjF,IAAI,CAAC,sCAAsCyE,KAAK,CAACQ,CAAC,CAACjF,IAAI,CAAC,MAAM,GAClF,EAAE;AAChB;AACA,QACQyE,KAAK,CAACQ,CAAC,CAACpF,WAAW,CAAC,GAAG,+BAA+B4E,KAAK,CAACQ,CAAC,CAACpF,WAAW,CAAC,QAAQ,GAAG,EAAE;AAC/F,QACQ,CAAAqF,YAAA,GAAAD,CAAC,CAAClF,SAAS,cAAAmF,YAAA,eAAXA,YAAA,CAAanC,MAAM,CAAEoC,EAAE,IAAKV,KAAK,CAACU,EAAE,CAAC,CAAC,CAACC,MAAM,GACzC;AACZ,kBAAkBH,CAAC,CAAClF,SAAS,CAACgD,MAAM,CAAEoC,EAAE,IAAKV,KAAK,CAACU,EAAE,CAAC,CAAC,CAACL,GAAG,CAAEK,EAAE,IAAK,OAAOA,EAAE,OAAO,CAAC,CAAClC,IAAI,CAAC,EAAE,CAAC;AAC9F,mBAAmB,GACP,EAAE;AACd,QAEQwB,KAAK,CAACQ,CAAC,CAACnF,YAAY,CAAC,GACjB,2DAA2D2E,KAAK,CAACQ,CAAC,CAACnF,YAAY,CAAC,QAAQ,GACxF,EAAE;AACd,WACW;IAAA,CACP,CAAC,CACAmD,IAAI,CAAC,EAAE,CAAC;;IAEX;IACA,MAAMoC,QAAQ,GAAG,CAAChH,IAAI,CAAC4B,YAAY,IAAI,EAAE,EACtC8C,MAAM,CAAEuC,CAAC,IAAKb,KAAK,CAACa,CAAC,CAACpF,KAAK,CAAC,CAAC,CAC7B4E,GAAG,CACDQ,CAAC,IAAK;AACb;AACA;AACA,gBAAgBb,KAAK,CAACa,CAAC,CAACpF,KAAK,CAAC;AAC9B,oDAAoDuE,KAAK,CAACa,CAAC,CAAClF,QAAQ,CAAC;AACrE;AACA;AACA,oCAAoCqE,KAAK,CAACa,CAAC,CAACnF,QAAQ,CAAC,IAAI,EAAE;AAC3D;AACA,QACQsE,KAAK,CAACa,CAAC,CAACjF,UAAU,CAAC,GACf;AACZ,0BAA0BoE,KAAK,CAACa,CAAC,CAACjF,UAAU,CAAC,sCAAsCoE,KAAK,CAACa,CAAC,CAACjF,UAAU,CAAC;AACtG,oBAAoB,GACR,EAAE;AACd,WAEI,CAAC,CACA4C,IAAI,CAAC,EAAE,CAAC;;IAEX;IACA,MAAMsC,UAAU,GAAGlH,IAAI,CAACiC,MAAM,CAACyC,MAAM,CAACC,OAAO,CAAC,CAACoC,MAAM,GACjD;AACN,WAAW/G,IAAI,CAACiC,MAAM,CAACyC,MAAM,CAACC,OAAO,CAAC,CAAC8B,GAAG,CAAEnD,CAAC,IAAK,4BAA4BA,CAAC,SAAS,CAAC,CAACsB,IAAI,CAAC,GAAG,CAAC;AACnG,cAAc,GACR,EAAE;;IAEN;IACA,OAAO;AACT;AACA,2BAA2BwB,KAAK,CAACpG,IAAI,CAACE,IAAI,CAAC,IAAI,EAAE;AACjD,kCAAkCkG,KAAK,CAACpG,IAAI,CAACO,IAAI,CAAC,IAAI,EAAE;AACxD;AACA;AACA,UAAU6F,KAAK,CAACpG,IAAI,CAACG,OAAO,CAAC,GAAG,MAAMiG,KAAK,CAACpG,IAAI,CAACG,OAAO,CAAC,GAAG,GAAG,EAAE;AACjE,UAAUiG,KAAK,CAACpG,IAAI,CAACM,OAAO,CAAC,GAAG,SAAS8F,KAAK,CAACpG,IAAI,CAACM,OAAO,CAAC,GAAG,GAAG,EAAE;AACpE,UAAU8F,KAAK,CAACpG,IAAI,CAACI,QAAQ,CAAC,GAAG,SAASgG,KAAK,CAACpG,IAAI,CAACI,QAAQ,CAAC,GAAG,GAAG,EAAE;AACtE,UAAUgG,KAAK,CAACpG,IAAI,CAACK,aAAa,CAAC,GAAG,SAAS+F,KAAK,CAACpG,IAAI,CAACK,aAAa,CAAC,EAAE,GAAG,EAAE;AAC/E;AACA;AACA,QACQ8F,eAAe,GACX;AACZ,yCAAyCA,eAAe,QAAQ,GACpD,EAAE;AACd;AACA,QACQI,OAAO,GAAG,6EAA6EA,OAAO,QAAQ,GAAG,EAAE;AACnH,QAAQG,OAAO,GAAG,8EAA8EA,OAAO,QAAQ,GAAG,EAAE;AACpH,QAAQC,YAAY,GAAG,4EAA4EA,YAAY,QAAQ,GAAG,EAAE;AAC5H,QAAQK,QAAQ,GAAG,gFAAgFA,QAAQ,QAAQ,GAAG,EAAE;AACxH,QAAQE,UAAU,GAAG,0EAA0EA,UAAU,QAAQ,GAAG,EAAE;AACtH;AACA,GAAG;EACH,CAAC;;EAEC;EACA,MAAMC,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAI,CAACtE,UAAU,EAAE;MACfuE,KAAK,CAAC,kCAAkC,CAAC;MACzC;IACF;IACA,MAAMC,WAAW,GAAGnB,gBAAgB,CAACrD,UAAU,CAAC;IAChD9C,QAAQ,CAAC,UAAU,EAAE;MAAEuH,KAAK,EAAE;QAAEtH,IAAI;QAAE6C,UAAU;QAAEwE;MAAY;IAAE,CAAC,CAAC;EACpE,CAAC;EAED,MAAME,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI;MAAA,IAAAC,UAAA;MACFtE,UAAU,CAAC,IAAI,CAAC;MAEhB,MAAMoC,GAAG,GAAG,MAAMtG,GAAG,CAACuG,IAAI,CAAC,YAAY,EAAEvF,IAAI,CAAC;MAC9C8F,OAAO,CAAC2B,GAAG,CAACnC,GAAG,CAACG,IAAI,CAAC;MACrB,KAAA+B,UAAA,GAAIlC,GAAG,CAACG,IAAI,cAAA+B,UAAA,eAARA,UAAA,CAAUE,OAAO,EAAE;QACrBN,KAAK,CAAC,mCAAmC,CAAC;MAC5C,CAAC,MAAM;QACLA,KAAK,CAAC,+BAA+B,CAAC;MACxC;IACF,CAAC,CAAC,OAAOzB,GAAG,EAAE;MAAA,IAAAgC,cAAA;MACV7B,OAAO,CAACC,KAAK,CAAC,aAAa,EAAE,EAAA4B,cAAA,GAAAhC,GAAG,CAACK,QAAQ,cAAA2B,cAAA,uBAAZA,cAAA,CAAclC,IAAI,KAAIE,GAAG,CAACM,OAAO,CAAC;MAC/DmB,KAAK,CAAC,6BAA6B,CAAC;IACtC,CAAC,SAAS;MACVlE,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA,oBACEzD,OAAA,CAAAE,SAAA;IAAAiI,QAAA,gBACAnI,OAAA,CAACF,MAAM;MAAAsI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,eAETvI,OAAA;MAAKwI,SAAS,EAAC,6BAA6B;MAAAL,QAAA,eAC1CnI,OAAA;QAAKwI,SAAS,EAAC,iEAAiE;QAAAL,QAAA,gBAC9EnI,OAAA;UAAQwI,SAAS,EAAC,8CAA8C;UAAAL,QAAA,eAC9DnI,OAAA;YAAAmI,QAAA,gBACEnI,OAAA;cAAIwI,SAAS,EAAC,sCAAsC;cAAAL,QAAA,EAAC;YAErD;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACLvI,OAAA;cAAGwI,SAAS,EAAC,4BAA4B;cAAAL,QAAA,EAAC;YAE1C;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eAGTvI,OAAA,CAACR,sBAAsB;UAACe,IAAI,EAAEA,IAAK;UAACmD,SAAS,EAAEA;QAAU;UAAA0E,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAG5DvI,OAAA,CAACP,gBAAgB;UACfc,IAAI,EAAEA,IAAK;UACXmE,YAAY,EAAEA,YAAa;UAC3BG,QAAQ,EAAEA,QAAS;UACnB1E,iBAAiB,EAAEA;QAAkB;UAAAiI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtC,CAAC,eAGFvI,OAAA,CAACN,iBAAiB;UAChBgC,UAAU,EAAEnB,IAAI,CAACmB,UAAW;UAC5BoC,gBAAgB,EAAEA,gBAAiB;UACnCK,MAAM,EAAEA;QAAO;UAAAiE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChB,CAAC,eAGFvI,OAAA,CAACL,eAAe;UACdmC,QAAQ,EAAEvB,IAAI,CAACuB,QAAS;UACxBgC,gBAAgB,EAAEA,gBAAiB;UACnCK,MAAM,EAAEA,MAAO;UACfE,kBAAkB,EAAEA,kBAAmB;UACvCG,qBAAqB,EAAEA;QAAsB;UAAA4D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C,CAAC,eAGFvI,OAAA,CAACH,mBAAmB;UAClBsC,YAAY,EAAE5B,IAAI,CAAC4B,YAAa;UAChC2B,gBAAgB,EAAEA,gBAAiB;UACnCK,MAAM,EAAEA;QAAO;UAAAiE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChB,CAAC,eAGFvI,OAAA,CAACJ,aAAa;UACZ4C,MAAM,EAAEjC,IAAI,CAACiC,MAAO;UACpBsB,gBAAgB,EAAEA,gBAAiB;UACnCK,MAAM,EAAEA;QAAO;UAAAiE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChB,CAAC,eAGFvI,OAAA;UAAKwI,SAAS,EAAC,uCAAuC;UAAAL,QAAA,gBACpDnI,OAAA;YACEwI,SAAS,EAAC,2MAA2M;YACrNC,OAAO,EAAEX,iBAAkB;YAC3BY,QAAQ,EAAElF,OAAQ;YAAA2E,QAAA,EACnB;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAETvI,OAAA;YAAKwI,SAAS,EAAC,kCAAkC;YAAAL,QAAA,gBAC/CnI,OAAA;cACEwI,SAAS,EAAC,qLAAqL;cAC/LC,OAAO,EAAE,MAAAA,CAAA,KAAY;gBACnB,IAAI;kBACFlF,iBAAiB,CAAC,IAAI,CAAC;kBACvB,MAAMwC,SAAS,GAAG,MAAMV,eAAe,CAAC,CAAC;kBACzChC,UAAU,CAAC0C,SAAS,CAAC4C,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;gBAC1C,CAAC,CAAC,OAAOzC,GAAG,EAAE;kBACZyB,KAAK,CACH,6DACF,CAAC;gBACH,CAAC,SAAS;kBACRpE,iBAAiB,CAAC,KAAK,CAAC;gBAC1B;cACF,CAAE;cACFmF,QAAQ,EAAElF,OAAQ;cAAA2E,QAAA,EAEjB/E,UAAU,GAAG,0BAA0B,GAAG;YAAkB;cAAAgF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvD,CAAC,eACTvI,OAAA;cAAGwI,SAAS,EAAC,2BAA2B;cAAAL,QAAA,EACrC7E,cAAc,GAAG,uBAAuB,GAAG;YAAE;cAAA8E,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7C,CAAC,EAEHnF,UAAU,iBACTpD,OAAA;cAAKwI,SAAS,EAAC,0FAA0F;cAAAL,QAAA,EACtG/E;YAAU;cAAAgF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACR,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eAENvI,OAAA;YACEwI,SAAS,EAAC,2LAA2L;YACrMC,OAAO,EAAEf,aAAc;YACvBgB,QAAQ,EAAE,CAACtF,UAAW;YAAA+E,QAAA,EACvB;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA,eACJ,CAAC;AAEP,CAAC;AAAClI,EAAA,CAhaID,aAAa;EAAA,QACAd,WAAW;AAAA;AAAAsJ,EAAA,GADxBxI,aAAa;AAkanB,eAAeA,aAAa;AAAC,IAAAwI,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}