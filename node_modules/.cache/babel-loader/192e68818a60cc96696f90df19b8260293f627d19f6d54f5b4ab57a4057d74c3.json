{"ast":null,"code":"var _jsxFileName = \"D:\\\\Assignments\\\\shibili-ai-resume-builder\\\\frontend\\\\src\\\\components\\\\PreviewPage.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport api from \"../api\";\nimport \"../s\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PreviewPage = () => {\n  _s();\n  const {\n    state\n  } = useLocation();\n  const {\n    form,\n    gensummary,\n    previewHtml\n  } = state || {};\n\n  // üî• EXPORT FUNCTION (place before return)\n  const exportPDF = async () => {\n    try {\n      var _document$getElementB;\n      const html = (_document$getElementB = document.getElementById(\"resume-html\")) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.innerHTML;\n      if (!html) {\n        alert(\"Resume HTML not found.\");\n        return;\n      }\n      const res = await api.post(\"/pdf/export\", {\n        html\n      }, {\n        responseType: \"blob\"\n      });\n      const url = window.URL.createObjectURL(new Blob([res.data]));\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.setAttribute(\"download\", `${(form === null || form === void 0 ? void 0 : form.name) || \"resume\"}.pdf`);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n    } catch (err) {\n      console.error(\"‚ùå Export PDF Error:\", err);\n      alert(\"Failed to export PDF\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"preview-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"resume-html\",\n      dangerouslySetInnerHTML: {\n        __html: previewHtml\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn-primary\",\n      onClick: exportPDF,\n      children: \"Export PDF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n_s(PreviewPage, \"FO3uhfHQFxifE5/pZVC1vAVIA9s=\", false, function () {\n  return [useLocation];\n});\n_c = PreviewPage;\nexport default PreviewPage;\nvar _c;\n$RefreshReg$(_c, \"PreviewPage\");","map":{"version":3,"names":["React","useLocation","api","jsxDEV","_jsxDEV","PreviewPage","_s","state","form","gensummary","previewHtml","exportPDF","_document$getElementB","html","document","getElementById","innerHTML","alert","res","post","responseType","url","window","URL","createObjectURL","Blob","data","link","createElement","href","setAttribute","name","body","appendChild","click","remove","err","console","error","className","children","id","dangerouslySetInnerHTML","__html","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["D:/Assignments/shibili-ai-resume-builder/frontend/src/components/PreviewPage.js"],"sourcesContent":["import React from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport api from \"../api\";\r\nimport \"../s\"\r\n\r\nconst PreviewPage = () => {\r\n  const { state } = useLocation();\r\n  const { form, gensummary, previewHtml } = state || {};\r\n\r\n  // üî• EXPORT FUNCTION (place before return)\r\n  const exportPDF = async () => {\r\n    try {\r\n      const html = document.getElementById(\"resume-html\")?.innerHTML;\r\n      if (!html) {\r\n        alert(\"Resume HTML not found.\");\r\n        return;\r\n      }\r\n\r\n      const res = await api.post(\r\n        \"/pdf/export\",\r\n        { html },\r\n        { responseType: \"blob\" }\r\n      );\r\n\r\n      const url = window.URL.createObjectURL(new Blob([res.data]));\r\n      const link = document.createElement(\"a\");\r\n      link.href = url;\r\n      link.setAttribute(\"download\", `${form?.name || \"resume\"}.pdf`);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.remove();\r\n    } catch (err) {\r\n      console.error(\"‚ùå Export PDF Error:\", err);\r\n      alert(\"Failed to export PDF\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"preview-container\">\r\n      <div\r\n        id=\"resume-html\"\r\n        dangerouslySetInnerHTML={{ __html: previewHtml }}\r\n      />\r\n\r\n      <button className=\"btn-primary\" onClick={exportPDF}>\r\n        Export PDF\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PreviewPage;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,GAAG,MAAM,QAAQ;AACxB,OAAO,MAAM;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEb,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB,MAAM;IAAEC;EAAM,CAAC,GAAGN,WAAW,CAAC,CAAC;EAC/B,MAAM;IAAEO,IAAI;IAAEC,UAAU;IAAEC;EAAY,CAAC,GAAGH,KAAK,IAAI,CAAC,CAAC;;EAErD;EACA,MAAMI,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MAAA,IAAAC,qBAAA;MACF,MAAMC,IAAI,IAAAD,qBAAA,GAAGE,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,cAAAH,qBAAA,uBAAtCA,qBAAA,CAAwCI,SAAS;MAC9D,IAAI,CAACH,IAAI,EAAE;QACTI,KAAK,CAAC,wBAAwB,CAAC;QAC/B;MACF;MAEA,MAAMC,GAAG,GAAG,MAAMhB,GAAG,CAACiB,IAAI,CACxB,aAAa,EACb;QAAEN;MAAK,CAAC,EACR;QAAEO,YAAY,EAAE;MAAO,CACzB,CAAC;MAED,MAAMC,GAAG,GAAGC,MAAM,CAACC,GAAG,CAACC,eAAe,CAAC,IAAIC,IAAI,CAAC,CAACP,GAAG,CAACQ,IAAI,CAAC,CAAC,CAAC;MAC5D,MAAMC,IAAI,GAAGb,QAAQ,CAACc,aAAa,CAAC,GAAG,CAAC;MACxCD,IAAI,CAACE,IAAI,GAAGR,GAAG;MACfM,IAAI,CAACG,YAAY,CAAC,UAAU,EAAE,GAAG,CAAAtB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEuB,IAAI,KAAI,QAAQ,MAAM,CAAC;MAC9DjB,QAAQ,CAACkB,IAAI,CAACC,WAAW,CAACN,IAAI,CAAC;MAC/BA,IAAI,CAACO,KAAK,CAAC,CAAC;MACZP,IAAI,CAACQ,MAAM,CAAC,CAAC;IACf,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEF,GAAG,CAAC;MACzCnB,KAAK,CAAC,sBAAsB,CAAC;IAC/B;EACF,CAAC;EAED,oBACEb,OAAA;IAAKmC,SAAS,EAAC,mBAAmB;IAAAC,QAAA,gBAChCpC,OAAA;MACEqC,EAAE,EAAC,aAAa;MAChBC,uBAAuB,EAAE;QAAEC,MAAM,EAAEjC;MAAY;IAAE;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClD,CAAC,eAEF3C,OAAA;MAAQmC,SAAS,EAAC,aAAa;MAACS,OAAO,EAAErC,SAAU;MAAA6B,QAAA,EAAC;IAEpD;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV,CAAC;AAACzC,EAAA,CA5CID,WAAW;EAAA,QACGJ,WAAW;AAAA;AAAAgD,EAAA,GADzB5C,WAAW;AA8CjB,eAAeA,WAAW;AAAC,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}