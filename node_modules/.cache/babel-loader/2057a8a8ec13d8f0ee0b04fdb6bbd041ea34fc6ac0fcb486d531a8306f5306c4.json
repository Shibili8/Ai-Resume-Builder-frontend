{"ast":null,"code":"var _jsxFileName = \"D:\\\\Assignments\\\\shibili-ai-resume-builder\\\\frontend\\\\src\\\\components\\\\ResumeBuilder.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../api\";\nimport PersonalDetailsSection from \"./ResumeSections/PersonalDetailsSection\";\nimport EducationSection from \"./ResumeSections/EducationSection\";\nimport ExperienceSection from \"./ResumeSections/ExperienceSection\";\nimport ProjectsSection from \"./ResumeSections/ProjectsSection\";\nimport SkillsSection from \"./ResumeSections/SkillsSection\";\nimport CertificatesSection from \"./ResumeSections/CertificatesSection\";\nimport AdditionalInfoSection from \"./ResumeSections/AdditionalInfoSection\";\nimport Navbar from \"./Navbar\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst qualificationList = [\"M.A (Master of Arts)\", \"M.Sc (Master of Science)\", \"M.Com (Master of Commerce)\", \"MBA (Master of Business Administration)\", \"MCA (Master of Computer Applications)\", \"M.Tech (Master of Technology)\", \"M.E (Master of Engineering)\", \"M.Ed (Master of Education)\", \"B.A (Bachelor of Arts)\", \"B.Sc (Bachelor of Science)\", \"B.Com (Bachelor of Commerce)\", \"BBA (Bachelor of Business Administration)\", \"BCA (Bachelor of Computer Applications)\", \"B.Tech (Bachelor of Technology)\", \"B.E (Bachelor of Engineering)\", \"B.Ed (Bachelor of Education)\", \"Diploma\", \"Higher Secondary (HSC)\", \"Secondary School (SSLC)\", \"Other\"];\nconst ResumeBuilder = () => {\n  _s();\n  const navigate = useNavigate();\n  const [form, setForm] = useState({\n    name: \"\",\n    emailId: \"\",\n    linkedIn: \"\",\n    portfolioLink: \"\",\n    phoneNo: \"\",\n    role: \"\",\n    totalExperienceYear: \"\",\n    city: \"\",\n    state: \"\",\n    pincode: \"\",\n    education: [{\n      institute: \"\",\n      startYear: \"\",\n      endYear: \"\",\n      eduType: \"\",\n      eduTypeOther: \"\",\n      department: \"\",\n      score: \"\",\n      scoreType: \"CGPA\"\n    }],\n    experience: [{\n      role: \"\",\n      company: \"\",\n      duration: \"\",\n      activities: \"\"\n    }],\n    projects: [{\n      name: \"\",\n      description: \"\",\n      technologies: \"\",\n      keyPoints: [\"\"],\n      link: \"\"\n    }],\n    certificates: [{\n      title: \"\",\n      issuedBy: \"\",\n      issuedOn: \"\",\n      credential: \"\"\n    }],\n    skills: [\"\"],\n    highestEducation: \"\",\n    highestEducationOther: \"\",\n    languages: [{\n      language: \"\",\n      read: false,\n      write: false,\n      speak: false\n    }],\n    nationality: \"\",\n    availabilityType: \"\",\n    noticePeriod: \"\",\n    availableFromDate: \"\",\n    additionalNotes: \"\"\n  });\n  const [gensummary, setSummary] = useState(\"\");\n  const [summaryLoading, setSummaryLoading] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [hasExperience, setHasExperience] = useState(false);\n  const [hasProjects, setHasProjects] = useState(false);\n  const [hasCertificates, setHasCertificates] = useState(false);\n\n  // ----------------------------------------------------------------\n  // HELPERS\n  // ----------------------------------------------------------------\n  const setScalar = (key, value) => setForm(prev => ({\n    ...prev,\n    [key]: value\n  }));\n  const updateArrayField = (section, index, field, value) => {\n    const copy = [...form[section]];\n\n    // Case 1: Array of simple strings (e.g., skills)\n    if (typeof copy[index] === \"string\" && field === null) {\n      copy[index] = value;\n      setForm({\n        ...form,\n        [section]: copy\n      });\n      return;\n    }\n\n    // Case 2: Array of objects\n    copy[index] = {\n      ...copy[index],\n      [field]: value\n    };\n    setForm({\n      ...form,\n      [section]: copy\n    });\n  };\n  const handleChange = (section, index, field, value) => {\n    // Update scalar fields (highestEducation, highestEducationOther)\n    if (index === null && field === null) {\n      setForm(prev => ({\n        ...prev,\n        [section]: value\n      }));\n      return;\n    }\n\n    // Update array/object fields\n    setForm(prev => {\n      const updated = [...prev[section]];\n      updated[index] = {\n        ...updated[index],\n        [field]: value\n      };\n      return {\n        ...prev,\n        [section]: updated\n      };\n    });\n  };\n  const addRow = (section, template) => {\n    setForm(prev => ({\n      ...prev,\n      [section]: [...prev[section], template]\n    }));\n  };\n  const addProjectKeyPoint = projectIndex => {\n    const projects = [...form.projects];\n    projects[projectIndex].keyPoints.push(\"\");\n    setForm({\n      ...form,\n      projects\n    });\n  };\n  const updateProjectKeyPoint = (projectIndex, kpIndex, value) => {\n    const projects = [...form.projects];\n    projects[projectIndex].keyPoints[kpIndex] = value;\n    setForm({\n      ...form,\n      projects\n    });\n  };\n\n  // ----------------------------------------------------------------\n  // AI SUMMARY\n  // ----------------------------------------------------------------\n  const buildPrompt = () => {\n    const skillsText = form.skills.filter(Boolean).join(\", \") || \"N/A\";\n    return `\nWrite a professional resume summary for a ${form.role || \"professional\"} with ${form.totalExperienceYear || 0} year(s) of experience. If years of experience is 0, treat them as a fresher. Highlight these skills: ${skillsText}. Keep it concise (<= 100 words), ATS-friendly, and recruiter focused.\n`.trim();\n  };\n  const generateSummary = async () => {\n    setLoading(true);\n    try {\n      var _ref, _ref2, _res$data$summary, _res$data, _res$data2, _res$data3;\n      const prompt = buildPrompt();\n      const res = await api.post(\"/ai/generate\", {\n        prompt\n      });\n      const summary = (_ref = (_ref2 = (_res$data$summary = (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.summary) !== null && _res$data$summary !== void 0 ? _res$data$summary : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.result) !== null && _ref2 !== void 0 ? _ref2 : (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.data) !== null && _ref !== void 0 ? _ref : \"\";\n      setSummary(summary);\n      return summary;\n    } catch (err) {\n      var _err$response;\n      console.error(\"AI generation error:\", ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ----------------------------------------------------------------\n  // PREVIEW HTML BUILDER (BACKEND PDF + FRONTEND PREVIEW)\n  // ----------------------------------------------------------------\n  const buildPreviewHtml = resolvedSummary => {\n    const clean = x => x && String(x).trim() ? String(x).trim() : \"\";\n\n    // ---------------- EDUCATION -----------------\n    const eduHtml = form.education.filter(e => clean(e.institute)).map(e => `\n      <div class=\"edu-item\">\n        <div class=\"row-space\">\n          <strong>${clean(e.institute)}</strong>\n          <span>${clean(e.startYear)} - ${clean(e.endYear)}</span>\n        </div>\n        <div class=\"left-row muted\">\n          ${clean(e.eduType === \"Other\" ? e.eduTypeOther : e.eduType)}\n          ${clean(e.department) ? ` ‚Äî ${clean(e.department)}` : \"\"}\n          ${clean(e.score) ? ` ‚Äî ${clean(e.score)}` : \"\"}\n        </div>\n      </div>`).join(\"\");\n\n    // ---------------- EXPERIENCE -----------------\n    const expHtml = form.experience.filter(e => clean(e.role) || clean(e.company)).map(e => `\n      <div class=\"exp-item\">\n        <div class=\"row-space\">\n          <strong>${clean(e.role)}</strong>\n          <span>${clean(e.duration)}</span>\n        </div>\n        <div class=\"left-row muted\">${clean(e.company)}</div>\n        ${clean(e.activities) ? `<div class=\"left-row\">${clean(e.activities)}</div>` : \"\"}\n      </div>`).join(\"\");\n\n    // ---------------- PROJECTS -----------------\n    const projectsHtml = form.projects.filter(p => clean(p.name)).map(p => {\n      var _p$keyPoints;\n      return `\n      <div class=\"proj-item\">\n        <div class=\"row-space\">\n          <strong>${clean(p.name)}</strong>\n          <span>${clean(p.link) ? `<a href=\"${clean(p.link)}\" target=\"_blank\">${clean(p.link)}</a>` : \"\"}</span>\n        </div>\n        ${clean(p.description) ? `<div class=\"left-row muted\">${clean(p.description)}</div>` : \"\"}\n        ${(_p$keyPoints = p.keyPoints) !== null && _p$keyPoints !== void 0 && _p$keyPoints.filter(kp => clean(kp)).length ? `<ul class=\"kp-list left-row\">\n                ${p.keyPoints.filter(clean).map(kp => `<li>${kp}</li>`).join(\"\")}\n               </ul>` : \"\"}\n        ${clean(p.technologies) ? `<div class=\"left-row muted\"><strong>Tech Used:</strong> ${clean(p.technologies)}</div>` : \"\"}\n      </div>`;\n    }).join(\"\");\n\n    // ---------------- CERTIFICATES -----------------\n    const certHtml = form.certificates.filter(c => clean(c.title)).map(c => `\n      <div class=\"cert-item\">\n        <div class=\"row-space\" style=\"display:flex; justify-content:space-between;\">\n          <strong>${clean(c.title)}</strong>\n          <span style=\"font-size:13px;color:#444;\">${clean(c.issuedOn)}</span>\n        </div>\n        <div class=\"left-row muted\">${clean(c.issuedBy)}</div>\n        ${clean(c.credential) ? `<div class=\"left-row\"><a href=\"${clean(c.credential)}\" target=\"_blank\">${clean(c.credential)}</a></div>` : \"\"}\n      </div>`).join(\"\");\n\n    // ---------------- SKILLS -----------------\n    const skillsHtml = form.skills.filter(Boolean).length ? `<div class=\"skills-wrap\">${form.skills.filter(Boolean).map(s => `<span class=\"skill-pill\">${s}</span>`).join(\" \")}</div>` : \"\";\n\n    // ---------------- LANGUAGES -----------------\n    const languageHtml = form.languages.filter(l => clean(l.language)).length > 0 ? `\n      <h3 style=\"font-weight:800;\">Languages</h3><hr/>\n      <div class=\"section-body\">\n        ${form.languages.filter(l => clean(l.language)).map(l => `\n          <div class=\"lang-item\" style=\"margin-bottom:6px;\">\n            <strong>${l.language}</strong> ‚Äî \n            ${l.read ? \"Read, \" : \"\"}\n            ${l.write ? \"Write, \" : \"\"}\n            ${l.speak ? \"Speak\" : \"\"}\n          </div>`).join(\"\")}\n      </div>` : \"\";\n\n    // ---------------- NATIONALITY / AVAILABILITY / NOTES -----------------\n    const addInfoHtml = `\n      <h3 style=\"font-weight:800;\">Additional Information</h3><hr/>\n      <div class=\"section-body\">\n        ${form.nationality ? `<p><strong>Nationality:</strong> ${form.nationality}</p>` : \"\"}\n        ${form.availabilityType ? `<p><strong>Availability:</strong> ${form.availabilityType}</p>` : \"\"}\n        ${form.noticePeriod ? `<p><strong>Notice Period:</strong> ${form.noticePeriod}</p>` : \"\"}\n        ${form.availableFromDate ? `<p><strong>Available From:</strong> ${form.availableFromDate}</p>` : \"\"}\n        ${form.additionalNotes ? `<p><strong>Notes:</strong> ${form.additionalNotes}</p>` : \"\"}\n      </div>\n    `;\n    return `\n      <div class=\"preview-root\">\n        <h1 class=\"center\">${clean(form.name)}</h1>\n        <div class=\"center muted\">${clean(form.role)}</div>\n\n        <div class=\"contact center\">\n          ${clean(form.emailId)} | \n          ${clean(form.phoneNo)} | \n          ${clean(form.linkedIn)} | \n          ${clean(form.portfolioLink)}\n        </div>\n\n        ${resolvedSummary ? `<h3 style=\"font-weight:800;\">Professional Summary</h3><hr/>\n               <div class=\"section-body\">${resolvedSummary}</div>` : \"\"}\n\n        ${eduHtml ? `<h3 style=\"font-weight:800;\">Education</h3><hr/><div class=\"section-body\">${eduHtml}</div>` : \"\"}\n        ${skillsHtml ? `<h3 style=\"font-weight:800;\">Skills</h3><hr/><div class=\"section-body\">${skillsHtml}</div>` : \"\"}\n        ${expHtml ? `<h3 style=\"font-weight:800;\">Experience</h3><hr/><div class=\"section-body\">${expHtml}</div>` : \"\"}\n        ${projectsHtml ? `<h3 style=\"font-weight:800;\">Projects</h3><hr/><div class=\"section-body\">${projectsHtml}</div>` : \"\"}\n        ${certHtml ? `<h3 style=\"font-weight:800;\">Certificates</h3><hr/><div class=\"section-body\">${certHtml}</div>` : \"\"}\n\n        ${languageHtml}\n        ${addInfoHtml}\n      </div>\n    `;\n  };\n  const handlePreview = () => {\n    if (!gensummary) return alert(\"Please generate a summary first!\");\n    const previewHtml = buildPreviewHtml(gensummary);\n    navigate(\"/preview\", {\n      state: {\n        form,\n        gensummary,\n        previewHtml\n      }\n    });\n  };\n  const validateRequiredFields = () => {\n    const errors = [];\n\n    // ---- Personal Details Required ----\n    if (!form.name.trim()) errors.push(\"Full Name\");\n    if (!form.role.trim()) errors.push(\"Role / Title\");\n    if (!form.emailId.trim()) errors.push(\"Email ID\");\n    if (!form.phoneNo.trim()) errors.push(\"Phone Number\");\n    if (!form.city.trim()) errors.push(\"City\");\n    if (!form.state.trim()) errors.push(\"State\");\n    if (!form.pincode.trim()) errors.push(\"Pincode\");\n    if (!form.totalExperienceYear && form.totalExperienceYear !== 0) errors.push(\"Total Experience\");\n\n    // ---- Education Required (first entry must be filled) ----\n    const edu = form.education[0];\n    if (!edu.institute.trim()) errors.push(\"Education ‚Üí Institute Name\");\n    if (!edu.startYear.trim()) errors.push(\"Education ‚Üí Start Year\");\n    if (!edu.endYear.trim()) errors.push(\"Education ‚Üí End Year\");\n    if (!edu.eduType.trim()) errors.push(\"Education ‚Üí Education Type\");\n    return errors;\n  };\n  const saveResumeHandler = async () => {\n    // Run validation\n    const missing = validateRequiredFields();\n    if (missing.length > 0) {\n      alert(\"Please fill all required fields:\\n\\n\" + missing.map(m => \"‚Ä¢ \" + m).join(\"\\n\"));\n      return; // STOP saving\n    }\n    try {\n      var _res$data4;\n      setLoading(true);\n      const res = await api.post(\"/portfolio\", form);\n      if ((_res$data4 = res.data) !== null && _res$data4 !== void 0 && _res$data4.success) alert(\"‚úÖ Resume saved successfully!\");else alert(\"‚ùå Save failed.\");\n    } catch (err) {\n      var _err$response2;\n      console.error(\"SAVE ERROR:\", ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data) || err.message);\n      alert(\"‚ùå Error saving resume.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ----------------------------------------------------------------\n  // RENDER\n  // ----------------------------------------------------------------\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-5xl mx-auto my-8 px-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white border border-gray-100 shadow-sm rounded-xl p-6 md:p-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"flex items-center justify-between gap-4 mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-semibold text-gray-900\",\n              children: \"AI Resume Builder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500 mt-1\",\n              children: \"Fill your details, generate an AI summary, preview & export.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PersonalDetailsSection, {\n          form: form,\n          setScalar: setScalar\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(EducationSection, {\n          form: form,\n          handleChange: handleChange,\n          addField: addRow,\n          qualificationList: qualificationList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(SkillsSection, {\n          skills: form.skills,\n          updateArrayField: updateArrayField,\n          addRow: addRow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ExperienceSection, {\n          experience: form.experience,\n          updateArrayField: updateArrayField,\n          addRow: addRow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProjectsSection, {\n          projects: form.projects,\n          updateArrayField: updateArrayField,\n          addRow: addRow,\n          addProjectKeyPoint: addProjectKeyPoint,\n          updateProjectKeyPoint: updateProjectKeyPoint\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CertificatesSection, {\n          certificates: form.certificates,\n          updateArrayField: updateArrayField,\n          addRow: addRow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AdditionalInfoSection, {\n          form: form,\n          updateArrayField: updateArrayField,\n          addRow: addRow,\n          setScalar: setScalar\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8 flex flex-col items-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50\",\n            disabled: loading,\n            onClick: saveResumeHandler,\n            children: \"\\uD83D\\uDCBE Save Resume\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"inline-flex items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700\",\n              disabled: loading,\n              onClick: async () => {\n                try {\n                  setSummaryLoading(true);\n                  const summary = await generateSummary();\n                  setSummary(summary.replace(/\\*/g, \"\"));\n                } catch (err) {\n                  alert(\"Summary generation failed.\");\n                } finally {\n                  setSummaryLoading(false);\n                }\n              },\n              children: gensummary ? \"Generate Another Summary\" : \"Generate Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 h-4\",\n              children: summaryLoading ? \"Generating summary...\" : \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 15\n            }, this), gensummary && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full mt-2 rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-sm\",\n              children: gensummary\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"inline-flex items-center justify-center rounded-md bg-emerald-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-emerald-700\",\n            disabled: !gensummary,\n            onClick: handlePreview,\n            children: \"\\uD83D\\uDC41\\uFE0F Preview Resume\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(ResumeBuilder, \"k/QZWGjb9yy3i7ESVJKJEXNkSKU=\", false, function () {\n  return [useNavigate];\n});\n_c = ResumeBuilder;\nexport default ResumeBuilder;\nvar _c;\n$RefreshReg$(_c, \"ResumeBuilder\");","map":{"version":3,"names":["React","useState","useNavigate","api","PersonalDetailsSection","EducationSection","ExperienceSection","ProjectsSection","SkillsSection","CertificatesSection","AdditionalInfoSection","Navbar","jsxDEV","_jsxDEV","Fragment","_Fragment","qualificationList","ResumeBuilder","_s","navigate","form","setForm","name","emailId","linkedIn","portfolioLink","phoneNo","role","totalExperienceYear","city","state","pincode","education","institute","startYear","endYear","eduType","eduTypeOther","department","score","scoreType","experience","company","duration","activities","projects","description","technologies","keyPoints","link","certificates","title","issuedBy","issuedOn","credential","skills","highestEducation","highestEducationOther","languages","language","read","write","speak","nationality","availabilityType","noticePeriod","availableFromDate","additionalNotes","gensummary","setSummary","summaryLoading","setSummaryLoading","loading","setLoading","hasExperience","setHasExperience","hasProjects","setHasProjects","hasCertificates","setHasCertificates","setScalar","key","value","prev","updateArrayField","section","index","field","copy","handleChange","updated","addRow","template","addProjectKeyPoint","projectIndex","push","updateProjectKeyPoint","kpIndex","buildPrompt","skillsText","filter","Boolean","join","trim","generateSummary","_ref","_ref2","_res$data$summary","_res$data","_res$data2","_res$data3","prompt","res","post","summary","data","result","err","_err$response","console","error","response","message","buildPreviewHtml","resolvedSummary","clean","x","String","eduHtml","e","map","expHtml","projectsHtml","p","_p$keyPoints","kp","length","certHtml","c","skillsHtml","s","languageHtml","l","addInfoHtml","handlePreview","alert","previewHtml","validateRequiredFields","errors","edu","saveResumeHandler","missing","m","_res$data4","success","_err$response2","children","fileName","_jsxFileName","lineNumber","columnNumber","className","addField","disabled","onClick","replace","_c","$RefreshReg$"],"sources":["D:/Assignments/shibili-ai-resume-builder/frontend/src/components/ResumeBuilder.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport api from \"../api\";\r\n\r\nimport PersonalDetailsSection from \"./ResumeSections/PersonalDetailsSection\";\r\nimport EducationSection from \"./ResumeSections/EducationSection\";\r\nimport ExperienceSection from \"./ResumeSections/ExperienceSection\";\r\nimport ProjectsSection from \"./ResumeSections/ProjectsSection\";\r\nimport SkillsSection from \"./ResumeSections/SkillsSection\";\r\nimport CertificatesSection from \"./ResumeSections/CertificatesSection\";\r\nimport AdditionalInfoSection from \"./ResumeSections/AdditionalInfoSection\";\r\n\r\nimport Navbar from \"./Navbar\";\r\n\r\nconst qualificationList = [\r\n  \"M.A (Master of Arts)\",\r\n  \"M.Sc (Master of Science)\",\r\n  \"M.Com (Master of Commerce)\",\r\n  \"MBA (Master of Business Administration)\",\r\n  \"MCA (Master of Computer Applications)\",\r\n  \"M.Tech (Master of Technology)\",\r\n  \"M.E (Master of Engineering)\",\r\n  \"M.Ed (Master of Education)\",\r\n  \"B.A (Bachelor of Arts)\",\r\n  \"B.Sc (Bachelor of Science)\",\r\n  \"B.Com (Bachelor of Commerce)\",\r\n  \"BBA (Bachelor of Business Administration)\",\r\n  \"BCA (Bachelor of Computer Applications)\",\r\n  \"B.Tech (Bachelor of Technology)\",\r\n  \"B.E (Bachelor of Engineering)\",\r\n  \"B.Ed (Bachelor of Education)\",\r\n  \"Diploma\",\r\n  \"Higher Secondary (HSC)\",\r\n  \"Secondary School (SSLC)\",\r\n  \"Other\",\r\n];\r\n\r\nconst ResumeBuilder = () => {\r\n  const navigate = useNavigate();\r\n\r\n  const [form, setForm] = useState({\r\n  name: \"\",\r\n  emailId: \"\",\r\n  linkedIn: \"\",\r\n  portfolioLink: \"\",\r\n  phoneNo: \"\",\r\n  role: \"\",\r\n  totalExperienceYear: \"\",\r\n  city: \"\",\r\n  state: \"\",\r\n  pincode: \"\",\r\n\r\n  education: [\r\n    {\r\n      institute: \"\",\r\n      startYear: \"\",\r\n      endYear: \"\",\r\n      eduType: \"\",\r\n      eduTypeOther: \"\",\r\n      department: \"\",\r\n      score: \"\",\r\n      scoreType: \"CGPA\",\r\n    },\r\n  ],\r\n\r\n  experience: [{ role: \"\", company: \"\", duration: \"\", activities: \"\" }],\r\n\r\n  projects: [\r\n    {\r\n      name: \"\",\r\n      description: \"\",\r\n      technologies: \"\",\r\n      keyPoints: [\"\"],\r\n      link: \"\",\r\n    },\r\n  ],\r\n\r\n  certificates: [{ title: \"\", issuedBy: \"\", issuedOn: \"\", credential: \"\" }],\r\n\r\n  skills: [\"\"],\r\n\r\n  highestEducation: \"\",\r\n  highestEducationOther: \"\",\r\n\r\n  languages: [{ language: \"\", read: false, write: false, speak: false }],\r\n\r\n  nationality: \"\",\r\n  availabilityType: \"\",\r\n  noticePeriod: \"\",\r\n  availableFromDate: \"\",\r\n  additionalNotes: \"\",\r\n});\r\n\r\n\r\n  const [gensummary, setSummary] = useState(\"\");\r\n  const [summaryLoading, setSummaryLoading] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [hasExperience, setHasExperience] = useState(false);\r\nconst [hasProjects, setHasProjects] = useState(false);\r\nconst [hasCertificates, setHasCertificates] = useState(false);\r\n\r\n  // ----------------------------------------------------------------\r\n  // HELPERS\r\n  // ----------------------------------------------------------------\r\n  const setScalar = (key, value) =>\r\n    setForm((prev) => ({\r\n      ...prev,\r\n      [key]: value,\r\n    }));\r\n\r\n  const updateArrayField = (section, index, field, value) => {\r\n  const copy = [...form[section]];\r\n\r\n  // Case 1: Array of simple strings (e.g., skills)\r\n  if (typeof copy[index] === \"string\" && field === null) {\r\n    copy[index] = value;\r\n    setForm({ ...form, [section]: copy });\r\n    return;\r\n  }\r\n\r\n  // Case 2: Array of objects\r\n  copy[index] = { ...copy[index], [field]: value };\r\n  setForm({ ...form, [section]: copy });\r\n};\r\n\r\nconst handleChange = (section, index, field, value) => {\r\n  // Update scalar fields (highestEducation, highestEducationOther)\r\n  if (index === null && field === null) {\r\n    setForm((prev) => ({\r\n      ...prev,\r\n      [section]: value,\r\n    }));\r\n    return;\r\n  }\r\n\r\n  // Update array/object fields\r\n  setForm((prev) => {\r\n    const updated = [...prev[section]];\r\n    updated[index] = { ...updated[index], [field]: value };\r\n    return { ...prev, [section]: updated };\r\n  });\r\n};\r\n\r\n\r\n\r\n  const addRow = (section, template) => {\r\n    setForm((prev) => ({\r\n      ...prev,\r\n      [section]: [...prev[section], template],\r\n    }));\r\n  };\r\n\r\n  const addProjectKeyPoint = (projectIndex) => {\r\n    const projects = [...form.projects];\r\n    projects[projectIndex].keyPoints.push(\"\");\r\n    setForm({ ...form, projects });\r\n  };\r\n\r\n  const updateProjectKeyPoint = (projectIndex, kpIndex, value) => {\r\n    const projects = [...form.projects];\r\n    projects[projectIndex].keyPoints[kpIndex] = value;\r\n    setForm({ ...form, projects });\r\n  };\r\n\r\n  // ----------------------------------------------------------------\r\n  // AI SUMMARY\r\n  // ----------------------------------------------------------------\r\n  const buildPrompt = () => {\r\n    const skillsText = form.skills.filter(Boolean).join(\", \") || \"N/A\";\r\n    return `\r\nWrite a professional resume summary for a ${form.role || \"professional\"} with ${\r\n      form.totalExperienceYear || 0\r\n    } year(s) of experience. If years of experience is 0, treat them as a fresher. Highlight these skills: ${skillsText}. Keep it concise (<= 100 words), ATS-friendly, and recruiter focused.\r\n`.trim();\r\n  };\r\n\r\n  const generateSummary = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const prompt = buildPrompt();\r\n      const res = await api.post(\"/ai/generate\", { prompt });\r\n      const summary =\r\n        res.data?.summary ?? res.data?.result ?? res.data?.data ?? \"\";\r\n      setSummary(summary);\r\n      return summary;\r\n    } catch (err) {\r\n      console.error(\"AI generation error:\", err.response?.data || err.message);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ----------------------------------------------------------------\r\n  // PREVIEW HTML BUILDER (BACKEND PDF + FRONTEND PREVIEW)\r\n  // ----------------------------------------------------------------\r\n  const buildPreviewHtml = (resolvedSummary) => {\r\n    const clean = (x) => (x && String(x).trim() ? String(x).trim() : \"\");\r\n\r\n    // ---------------- EDUCATION -----------------\r\n    const eduHtml = form.education\r\n      .filter((e) => clean(e.institute))\r\n      .map(\r\n        (e) => `\r\n      <div class=\"edu-item\">\r\n        <div class=\"row-space\">\r\n          <strong>${clean(e.institute)}</strong>\r\n          <span>${clean(e.startYear)} - ${clean(e.endYear)}</span>\r\n        </div>\r\n        <div class=\"left-row muted\">\r\n          ${clean(e.eduType === \"Other\" ? e.eduTypeOther : e.eduType)}\r\n          ${clean(e.department) ? ` ‚Äî ${clean(e.department)}` : \"\"}\r\n          ${clean(e.score) ? ` ‚Äî ${clean(e.score)}` : \"\"}\r\n        </div>\r\n      </div>`\r\n      )\r\n      .join(\"\");\r\n\r\n    // ---------------- EXPERIENCE -----------------\r\n    const expHtml = form.experience\r\n      .filter((e) => clean(e.role) || clean(e.company))\r\n      .map(\r\n        (e) => `\r\n      <div class=\"exp-item\">\r\n        <div class=\"row-space\">\r\n          <strong>${clean(e.role)}</strong>\r\n          <span>${clean(e.duration)}</span>\r\n        </div>\r\n        <div class=\"left-row muted\">${clean(e.company)}</div>\r\n        ${clean(e.activities) ? `<div class=\"left-row\">${clean(e.activities)}</div>` : \"\"}\r\n      </div>`\r\n      )\r\n      .join(\"\");\r\n\r\n    // ---------------- PROJECTS -----------------\r\n    const projectsHtml = form.projects\r\n      .filter((p) => clean(p.name))\r\n      .map(\r\n        (p) => `\r\n      <div class=\"proj-item\">\r\n        <div class=\"row-space\">\r\n          <strong>${clean(p.name)}</strong>\r\n          <span>${\r\n            clean(p.link)\r\n              ? `<a href=\"${clean(p.link)}\" target=\"_blank\">${clean(p.link)}</a>`\r\n              : \"\"\r\n          }</span>\r\n        </div>\r\n        ${\r\n          clean(p.description)\r\n            ? `<div class=\"left-row muted\">${clean(p.description)}</div>`\r\n            : \"\"\r\n        }\r\n        ${\r\n          p.keyPoints?.filter((kp) => clean(kp)).length\r\n            ? `<ul class=\"kp-list left-row\">\r\n                ${p.keyPoints.filter(clean).map((kp) => `<li>${kp}</li>`).join(\"\")}\r\n               </ul>`\r\n            : \"\"\r\n        }\r\n        ${\r\n          clean(p.technologies)\r\n            ? `<div class=\"left-row muted\"><strong>Tech Used:</strong> ${clean(\r\n                p.technologies\r\n              )}</div>`\r\n            : \"\"\r\n        }\r\n      </div>`\r\n      )\r\n      .join(\"\");\r\n\r\n    // ---------------- CERTIFICATES -----------------\r\n    const certHtml = form.certificates\r\n      .filter((c) => clean(c.title))\r\n      .map(\r\n        (c) => `\r\n      <div class=\"cert-item\">\r\n        <div class=\"row-space\" style=\"display:flex; justify-content:space-between;\">\r\n          <strong>${clean(c.title)}</strong>\r\n          <span style=\"font-size:13px;color:#444;\">${clean(c.issuedOn)}</span>\r\n        </div>\r\n        <div class=\"left-row muted\">${clean(c.issuedBy)}</div>\r\n        ${\r\n          clean(c.credential)\r\n            ? `<div class=\"left-row\"><a href=\"${clean(\r\n                c.credential\r\n              )}\" target=\"_blank\">${clean(c.credential)}</a></div>`\r\n            : \"\"\r\n        }\r\n      </div>`\r\n      )\r\n      .join(\"\");\r\n\r\n    // ---------------- SKILLS -----------------\r\n    const skillsHtml = form.skills.filter(Boolean).length\r\n      ? `<div class=\"skills-wrap\">${form.skills\r\n          .filter(Boolean)\r\n          .map((s) => `<span class=\"skill-pill\">${s}</span>`)\r\n          .join(\" \")}</div>`\r\n      : \"\";\r\n\r\n    // ---------------- LANGUAGES -----------------\r\n    const languageHtml =\r\n      form.languages.filter((l) => clean(l.language)).length > 0\r\n        ? `\r\n      <h3 style=\"font-weight:800;\">Languages</h3><hr/>\r\n      <div class=\"section-body\">\r\n        ${form.languages\r\n          .filter((l) => clean(l.language))\r\n          .map(\r\n            (l) => `\r\n          <div class=\"lang-item\" style=\"margin-bottom:6px;\">\r\n            <strong>${l.language}</strong> ‚Äî \r\n            ${l.read ? \"Read, \" : \"\"}\r\n            ${l.write ? \"Write, \" : \"\"}\r\n            ${l.speak ? \"Speak\" : \"\"}\r\n          </div>`\r\n          )\r\n          .join(\"\")}\r\n      </div>`\r\n        : \"\";\r\n\r\n    // ---------------- NATIONALITY / AVAILABILITY / NOTES -----------------\r\n    const addInfoHtml = `\r\n      <h3 style=\"font-weight:800;\">Additional Information</h3><hr/>\r\n      <div class=\"section-body\">\r\n        ${form.nationality ? `<p><strong>Nationality:</strong> ${form.nationality}</p>` : \"\"}\r\n        ${form.availabilityType ? `<p><strong>Availability:</strong> ${form.availabilityType}</p>` : \"\"}\r\n        ${\r\n          form.noticePeriod\r\n            ? `<p><strong>Notice Period:</strong> ${form.noticePeriod}</p>`\r\n            : \"\"\r\n        }\r\n        ${\r\n          form.availableFromDate\r\n            ? `<p><strong>Available From:</strong> ${form.availableFromDate}</p>`\r\n            : \"\"\r\n        }\r\n        ${\r\n          form.additionalNotes\r\n            ? `<p><strong>Notes:</strong> ${form.additionalNotes}</p>`\r\n            : \"\"\r\n        }\r\n      </div>\r\n    `;\r\n\r\n    return `\r\n      <div class=\"preview-root\">\r\n        <h1 class=\"center\">${clean(form.name)}</h1>\r\n        <div class=\"center muted\">${clean(form.role)}</div>\r\n\r\n        <div class=\"contact center\">\r\n          ${clean(form.emailId)} | \r\n          ${clean(form.phoneNo)} | \r\n          ${clean(form.linkedIn)} | \r\n          ${clean(form.portfolioLink)}\r\n        </div>\r\n\r\n        ${\r\n          resolvedSummary\r\n            ? `<h3 style=\"font-weight:800;\">Professional Summary</h3><hr/>\r\n               <div class=\"section-body\">${resolvedSummary}</div>`\r\n            : \"\"\r\n        }\r\n\r\n        ${eduHtml ? `<h3 style=\"font-weight:800;\">Education</h3><hr/><div class=\"section-body\">${eduHtml}</div>` : \"\"}\r\n        ${skillsHtml ? `<h3 style=\"font-weight:800;\">Skills</h3><hr/><div class=\"section-body\">${skillsHtml}</div>` : \"\"}\r\n        ${expHtml ? `<h3 style=\"font-weight:800;\">Experience</h3><hr/><div class=\"section-body\">${expHtml}</div>` : \"\"}\r\n        ${projectsHtml ? `<h3 style=\"font-weight:800;\">Projects</h3><hr/><div class=\"section-body\">${projectsHtml}</div>` : \"\"}\r\n        ${certHtml ? `<h3 style=\"font-weight:800;\">Certificates</h3><hr/><div class=\"section-body\">${certHtml}</div>` : \"\"}\r\n\r\n        ${languageHtml}\r\n        ${addInfoHtml}\r\n      </div>\r\n    `;\r\n  };\r\n\r\n  const handlePreview = () => {\r\n    if (!gensummary) return alert(\"Please generate a summary first!\");\r\n    const previewHtml = buildPreviewHtml(gensummary);\r\n    navigate(\"/preview\", { state: { form, gensummary, previewHtml } });\r\n  };\r\n\r\n  const validateRequiredFields = () => {\r\n  const errors = [];\r\n\r\n  // ---- Personal Details Required ----\r\n  if (!form.name.trim()) errors.push(\"Full Name\");\r\n  if (!form.role.trim()) errors.push(\"Role / Title\");\r\n  if (!form.emailId.trim()) errors.push(\"Email ID\");\r\n  if (!form.phoneNo.trim()) errors.push(\"Phone Number\");\r\n  if (!form.city.trim()) errors.push(\"City\");\r\n  if (!form.state.trim()) errors.push(\"State\");\r\n  if (!form.pincode.trim()) errors.push(\"Pincode\");\r\n  if (!form.totalExperienceYear && form.totalExperienceYear !== 0)\r\n    errors.push(\"Total Experience\");\r\n\r\n  // ---- Education Required (first entry must be filled) ----\r\n  const edu = form.education[0];\r\n  if (!edu.institute.trim()) errors.push(\"Education ‚Üí Institute Name\");\r\n  if (!edu.startYear.trim()) errors.push(\"Education ‚Üí Start Year\");\r\n  if (!edu.endYear.trim()) errors.push(\"Education ‚Üí End Year\");\r\n  if (!edu.eduType.trim()) errors.push(\"Education ‚Üí Education Type\");\r\n\r\n  return errors;\r\n};\r\n\r\n\r\n  const saveResumeHandler = async () => {\r\n  // Run validation\r\n  const missing = validateRequiredFields();\r\n\r\n  if (missing.length > 0) {\r\n    alert(\r\n      \"Please fill all required fields:\\n\\n\" +\r\n      missing.map((m) => \"‚Ä¢ \" + m).join(\"\\n\")\r\n    );\r\n    return; // STOP saving\r\n  }\r\n\r\n  try {\r\n    setLoading(true);\r\n    const res = await api.post(\"/portfolio\", form);\r\n\r\n    if (res.data?.success) alert(\"‚úÖ Resume saved successfully!\");\r\n    else alert(\"‚ùå Save failed.\");\r\n  } catch (err) {\r\n    console.error(\"SAVE ERROR:\", err.response?.data || err.message);\r\n    alert(\"‚ùå Error saving resume.\");\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n\r\n  // ----------------------------------------------------------------\r\n  // RENDER\r\n  // ----------------------------------------------------------------\r\n  return (\r\n    <>\r\n      <Navbar />\r\n\r\n      <div className=\"max-w-5xl mx-auto my-8 px-4\">\r\n        <div className=\"bg-white border border-gray-100 shadow-sm rounded-xl p-6 md:p-8\">\r\n          <header className=\"flex items-center justify-between gap-4 mb-6\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-semibold text-gray-900\">\r\n                AI Resume Builder\r\n              </h2>\r\n              <p className=\"text-sm text-gray-500 mt-1\">\r\n                Fill your details, generate an AI summary, preview & export.\r\n              </p>\r\n            </div>\r\n          </header>\r\n\r\n          {/* Sections */}\r\n          <PersonalDetailsSection form={form} setScalar={setScalar} />\r\n\r\n            <EducationSection\r\n              form={form}\r\n              handleChange={handleChange}\r\n              addField={addRow}\r\n              qualificationList={qualificationList}\r\n            />\r\n\r\n\r\n          <SkillsSection\r\n            skills={form.skills}\r\n            updateArrayField={updateArrayField}\r\n            addRow={addRow}\r\n          />\r\n\r\n          <ExperienceSection\r\n            experience={form.experience}\r\n            updateArrayField={updateArrayField}\r\n            addRow={addRow}\r\n          />\r\n\r\n          <ProjectsSection\r\n            projects={form.projects}\r\n            updateArrayField={updateArrayField}\r\n            addRow={addRow}\r\n            addProjectKeyPoint={addProjectKeyPoint}\r\n            updateProjectKeyPoint={updateProjectKeyPoint}\r\n          />\r\n\r\n          <CertificatesSection\r\n            certificates={form.certificates}\r\n            updateArrayField={updateArrayField}\r\n            addRow={addRow}\r\n          />\r\n\r\n          <AdditionalInfoSection\r\n            form={form}\r\n            updateArrayField={updateArrayField}\r\n            addRow={addRow}\r\n            setScalar={setScalar}\r\n          />\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"mt-8 flex flex-col items-center gap-4\">\r\n            <button\r\n              className=\"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50\"\r\n              disabled={loading}\r\n              onClick={saveResumeHandler}\r\n            >\r\n              üíæ Save Resume\r\n            </button>\r\n\r\n            {/* Summary Generation */}\r\n            <div className=\"flex flex-col items-center gap-2\">\r\n              <button\r\n                className=\"inline-flex items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700\"\r\n                disabled={loading}\r\n                onClick={async () => {\r\n                  try {\r\n                    setSummaryLoading(true);\r\n                    const summary = await generateSummary();\r\n                    setSummary(summary.replace(/\\*/g, \"\"));\r\n                  } catch (err) {\r\n                    alert(\"Summary generation failed.\");\r\n                  } finally {\r\n                    setSummaryLoading(false);\r\n                  }\r\n                }}\r\n              >\r\n                {gensummary ? \"Generate Another Summary\" : \"Generate Summary\"}\r\n              </button>\r\n\r\n              <p className=\"text-xs text-gray-500 h-4\">\r\n                {summaryLoading ? \"Generating summary...\" : \"\"}\r\n              </p>\r\n\r\n              {gensummary && (\r\n                <div className=\"w-full mt-2 rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-sm\">\r\n                  {gensummary}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <button\r\n              className=\"inline-flex items-center justify-center rounded-md bg-emerald-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-emerald-700\"\r\n              disabled={!gensummary}\r\n              onClick={handlePreview}\r\n            >\r\n              üëÅÔ∏è Preview Resume\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ResumeBuilder;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}